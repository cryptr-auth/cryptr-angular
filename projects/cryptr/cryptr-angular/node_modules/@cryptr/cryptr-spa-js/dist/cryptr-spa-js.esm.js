var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function unwrapExports (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

function getCjsExportFromNamespace (n) {
	return n && n['default'] || n;
}

var runtime_1=createCommonjsModule((function(t){var r=function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"");}catch(t){u=function(t,r,e){return t[r]=e};}function h(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype),a=new G(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=y,e.arg;e.dispatchException(e.arg);}else "return"===e.method&&e.abrupt("return",e.arg);n=p;var u=s(t,r,e);if("normal"===u.type){if(n=e.done?y:l,u.arg===v)continue;return {value:u.arg,done:e.done}}"throw"===u.type&&(n=y,e.method="throw",e.arg=u.arg);}}}(t,e,a),i}function s(t,r,e){try{return {type:"normal",arg:t.call(r,e)}}catch(t){return {type:"throw",arg:t}}}t.wrap=h;var f="suspendedStart",l="suspendedYield",p="executing",y="completed",v={};function d(){}function m(){}function g(){}var w={};w[i]=function(){return this};var x=Object.getPrototypeOf,L=x&&x(x(N([])));L&&L!==e&&n.call(L,i)&&(w=L);var E=g.prototype=d.prototype=Object.create(w);function b(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}));}));}function _(t,r){function e(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var h=u.arg,f=h.value;return f&&"object"==typeof f&&n.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,a,c);}),(function(t){e("throw",t,a,c);})):r.resolve(f).then((function(t){h.value=t,a(h);}),(function(t){return e("throw",t,a,c)}))}c(u.arg);}var o;this._invoke=function(t,n){function i(){return new r((function(r,o){e(t,n,r,o);}))}return o=o?o.then(i,i):i()};}function j(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,j(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method");}return v}var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r);}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r;}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0);}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return {next:F}}function F(){return {value:r,done:!0}}return m.prototype=E.constructor=g,g.constructor=m,m.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return !!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return {__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new _(h(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(E),u(E,c,"Generator"),E[i]=function(){return this},E.toString=function(){return "[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r);},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else {if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return "break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e);}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}(t.exports);try{regeneratorRuntime=r;}catch(t){Function("r","regeneratorRuntime = r")(r);}}));

var regenerator=runtime_1;

function asyncGeneratorStep(e,n,r,o,t,a,c){try{var s=e[a](c),u=s.value;}catch(e){return void r(e)}s.done?n(u):Promise.resolve(u).then(o,t);}function _asyncToGenerator(e){return function(){var n=this,r=arguments;return new Promise((function(o,t){var a=e.apply(n,r);function c(e){asyncGeneratorStep(a,o,t,c,s,"next",e);}function s(e){asyncGeneratorStep(a,o,t,c,s,"throw",e);}c(void 0);}))}}var asyncToGenerator=_asyncToGenerator;

function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,o=new Array(a);e<a;e++)o[e]=r[e];return o}var arrayLikeToArray=_arrayLikeToArray;

function _arrayWithoutHoles(r){if(Array.isArray(r))return arrayLikeToArray(r)}var arrayWithoutHoles=_arrayWithoutHoles;

function _iterableToArray(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}var iterableToArray=_iterableToArray;

function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return arrayLikeToArray(r,e);var o=Object.prototype.toString.call(r).slice(8,-1);return "Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?arrayLikeToArray(r,e):void 0}}var unsupportedIterableToArray=_unsupportedIterableToArray;

function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var nonIterableSpread=_nonIterableSpread;

function _toConsumableArray(r){return arrayWithoutHoles(r)||iterableToArray(r)||unsupportedIterableToArray(r)||nonIterableSpread()}var toConsumableArray=_toConsumableArray;

function _classCallCheck(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var classCallCheck=_classCallCheck;

function _defineProperties(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a);}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var createClass=_createClass;

function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defineProperty=_defineProperty;

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(t,e){return (extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);})(t,e)};function __extends(t,e){function r(){this.constructor=t;}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r);}var __assign=function(){return (__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function __rest(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);}return r}function __values(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return {next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value);}catch(t){o={error:t};}finally{try{n&&!n.done&&(r=a.return)&&r.call(a);}finally{if(o)throw o.error}}return i}function __spread(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t}

var SessionStatus;!function(s){s.Ok="ok",s.Exited="exited",s.Crashed="crashed",s.Abnormal="abnormal";}(SessionStatus||(SessionStatus={}));

var Severity;!function(r){r.Fatal="fatal",r.Error="error",r.Warning="warning",r.Log="log",r.Info="info",r.Debug="debug",r.Critical="critical";}(Severity||(Severity={})),function(r){r.fromString=function(e){switch(e){case"debug":return r.Debug;case"info":return r.Info;case"warn":case"warning":return r.Warning;case"error":return r.Error;case"fatal":return r.Fatal;case"critical":return r.Critical;case"log":default:return r.Log}};}(Severity||(Severity={}));

var Status;!function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed";}(Status||(Status={})),function(t){t.fromHttpCode=function(n){return n>=200&&n<300?t.Success:429===n?t.RateLimit:n>=400&&n<500?t.Invalid:n>=500?t.Failed:t.Unknown};}(Status||(Status={}));

var TransactionSamplingMethod;!function(n){n.Explicit="explicitly_set",n.Sampler="client_sampler",n.Rate="client_rate",n.Inheritance="inheritance";}(TransactionSamplingMethod||(TransactionSamplingMethod={}));

function isError(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return !0;default:return isInstanceOf(t,Error)}}function isErrorEvent(t){return "[object ErrorEvent]"===Object.prototype.toString.call(t)}function isDOMError(t){return "[object DOMError]"===Object.prototype.toString.call(t)}function isDOMException(t){return "[object DOMException]"===Object.prototype.toString.call(t)}function isString(t){return "[object String]"===Object.prototype.toString.call(t)}function isPrimitive(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function isPlainObject(t){return "[object Object]"===Object.prototype.toString.call(t)}function isEvent(t){return "undefined"!=typeof Event&&isInstanceOf(t,Event)}function isElement(t){return "undefined"!=typeof Element&&isInstanceOf(t,Element)}function isRegExp(t){return "[object RegExp]"===Object.prototype.toString.call(t)}function isThenable(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function isSyntheticEvent(t){return isPlainObject(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function isInstanceOf(t,e){try{return t instanceof e}catch(t){return !1}}

function htmlTreeAsString(t){try{for(var e=t,r=[],n=0,i=0,s=" > ".length,h=void 0;e&&n++<5&&!("html"===(h=_htmlElementAsString(e))||n>1&&i+r.length*s+h.length>=80);)r.push(h),i+=h.length,e=e.parentNode;return r.reverse().join(" > ")}catch(t){return "<unknown>"}}function _htmlElementAsString(t){var e,r,n,i,s,h=t,l=[];if(!h||!h.tagName)return "";if(l.push(h.tagName.toLowerCase()),h.id&&l.push("#"+h.id),(e=h.className)&&isString(e))for(r=e.split(/\s+/),s=0;s<r.length;s++)l.push("."+r[s]);var o=["type","name","title","alt"];for(s=0;s<o.length;s++)n=o[s],(i=h.getAttribute(n))&&l.push("["+n+'="'+i+'"]');return l.join("")}

var setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(r,t){return r.__proto__=t,r}function mixinProperties(r,t){for(var o in t)r.hasOwnProperty(o)||(r[o]=t[o]);return r}

var SentryError=function(r){function t(t){var o=this.constructor,e=r.call(this,t)||this;return e.message=t,e.name=o.prototype.constructor.name,setPrototypeOf(e,o.prototype),e}return __extends(t,r),t}(Error);

var DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,ERROR_MESSAGE="Invalid Dsn",Dsn=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate();}return t.prototype.toString=function(t){void 0===t&&(t=!1);var o=this,r=o.host,i=o.path,s=o.pass,p=o.port,n=o.projectId;return o.protocol+"://"+o.user+(t&&s?":"+s:"")+"@"+r+(p?":"+p:"")+"/"+(i?i+"/":i)+n},t.prototype._fromString=function(t){var o=DSN_REGEX.exec(t);if(!o)throw new SentryError(ERROR_MESSAGE);var r=__read(o.slice(1),6),i=r[0],s=r[1],p=r[2],n=void 0===p?"":p,e=r[3],h=r[4],c=void 0===h?"":h,a="",E=r[5],S=E.split("/");if(S.length>1&&(a=S.slice(0,-1).join("/"),E=S.pop()),E){var d=E.match(/^\d+/);d&&(E=d[0]);}this._fromComponents({host:e,pass:n,path:a,projectId:E,port:c,protocol:i,user:s});},t.prototype._fromComponents=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId;},t.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach((function(o){if(!t[o])throw new SentryError(ERROR_MESSAGE+": "+o+" missing")})),!this.projectId.match(/^\d+$/))throw new SentryError(ERROR_MESSAGE+": Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new SentryError(ERROR_MESSAGE+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new SentryError(ERROR_MESSAGE+": Invalid port "+this.port)},t}();

var Memo=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[];}return e.prototype.memoize=function(e){if(this._hasWeakSet)return !!this._inner.has(e)||(this._inner.add(e),!1);for(var n=0;n<this._inner.length;n++){if(this._inner[n]===e)return !0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===e){this._inner.splice(n,1);break}},e}();

var defaultFunctionName="<anonymous>";function getFunctionName(n){try{return n&&"function"==typeof n&&n.name||defaultFunctionName}catch(n){return defaultFunctionName}}

function truncate(t,r){return void 0===r&&(r=0),"string"!=typeof t||0===r||t.length<=r?t:t.substr(0,r)+"..."}function safeJoin(t,r){if(!Array.isArray(t))return "";for(var n=[],i=0;i<t.length;i++){var e=t[i];try{n.push(String(e));}catch(t){n.push("[value cannot be serialized]");}}return n.join(r)}function isMatchingPattern(t,r){return !!isString(t)&&(isRegExp(r)?r.test(t):"string"==typeof r&&-1!==t.indexOf(r))}

function fill(e,t,r){if(t in e){var n=e[t],o=r(n);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:n}});}catch(e){}e[t]=o;}}function urlEncode(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}function getWalkSource(e){if(isError(e)){var t=e,r={message:t.message,name:t.name,stack:t.stack};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}if(isEvent(e)){var o=e,i={};i.type=o.type;try{i.target=isElement(o.target)?htmlTreeAsString(o.target):Object.prototype.toString.call(o.target);}catch(e){i.target="<unknown>";}try{i.currentTarget=isElement(o.currentTarget)?htmlTreeAsString(o.currentTarget):Object.prototype.toString.call(o.currentTarget);}catch(e){i.currentTarget="<unknown>";}for(var n in "undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o);return i}return e}function utf8Length(e){return ~-encodeURI(e).split(/%..|./).length}function jsonSize(e){return utf8Length(JSON.stringify(e))}function normalizeToSize(e,t,r){void 0===t&&(t=3),void 0===r&&(r=102400);var n=normalize(e,t);return jsonSize(n)>r?normalizeToSize(e,t-1,r):n}function serializeValue(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return "[Object]";if("[object Array]"===t)return "[Array]";var r=normalizeValue(e);return isPrimitive(r)?r:t}function normalizeValue(e,t){return "domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":isSyntheticEvent(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+getFunctionName(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function walk(e,t,r,n){if(void 0===r&&(r=1/0),void 0===n&&(n=new Memo),0===r)return serializeValue(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=normalizeValue(t,e);if(isPrimitive(o))return o;var i=getWalkSource(t),a=Array.isArray(t)?[]:{};if(n.memoize(t))return "[Circular ~]";for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=walk(u,i[u],r-1,n));return n.unmemoize(t),a}function normalize(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,r){return walk(e,r,t)})))}catch(e){return "**non-serializable**"}}function extractExceptionKeysForMessage(e,t){void 0===t&&(t=40);var r=Object.keys(getWalkSource(e));if(r.sort(),!r.length)return "[object has no keys]";if(r[0].length>=t)return truncate(r[0],t);for(var n=r.length;n>0;n--){var o=r.slice(0,n).join(", ");if(!(o.length>t))return n===r.length?o:truncate(o,t)}return ""}function dropUndefinedKeys(e){var t,r;if(isPlainObject(e)){var n=e,o={};try{for(var i=__values(Object.keys(n)),a=i.next();!a.done;a=i.next()){var u=a.value;void 0!==n[u]&&(o[u]=dropUndefinedKeys(n[u]));}}catch(e){t={error:e};}finally{try{a&&!a.done&&(r=i.return)&&r.call(i);}finally{if(t)throw t.error}}return o}return Array.isArray(e)?e.map(dropUndefinedKeys):e}

function isNodeEnv(){return "[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function dynamicRequire(e,r){return e.require(r)}var DEFAULT_REQUEST_KEYS=["cookies","data","headers","method","query_string","url"];function extractNodeRequestData(e,r){if(void 0===r&&(r=DEFAULT_REQUEST_KEYS),!isNodeEnv())throw new Error("Can't get node request data outside of a node environment");var o={},t=e.headers||e.header||{},a=e.method,i=e.hostname||e.host||t.host||"<no host>",s="https"===e.protocol||e.secure||(e.socket||{}).encrypted?"https":"http",n=e.originalUrl||e.url||"",c=s+"://"+i+n;return r.forEach((function(r){switch(r){case"headers":o.headers=t;break;case"method":o.method=a;break;case"url":o.url=c;break;case"cookies":o.cookies=e.cookies||dynamicRequire(module,"cookie").parse(t.cookie||"");break;case"query_string":o.query_string=dynamicRequire(module,"url").parse(n||"",!1).query;break;case"data":if("GET"===a||"HEAD"===a)break;void 0!==e.body&&(o.data=isString(e.body)?e.body:JSON.stringify(normalize(e.body)));break;default:({}).hasOwnProperty.call(e,r)&&(o[r]=e[r]);}})),o}

var fallbackGlobalObject={};function getGlobalObject(){return isNodeEnv()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:fallbackGlobalObject}function uuid4(){var e=getGlobalObject(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return ("x"===e?t:3&t|8).toString(16)}))}function parseUrl(e){if(!e)return {};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return {};var n=t[6]||"",r=t[8]||"";return {host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function getEventDescription(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function consoleSandbox(e){var t=getGlobalObject();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__);}));var a=e();return Object.keys(r).forEach((function(e){n[e]=r[e];})),a}function addExceptionTypeValue(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error";}function addExceptionMechanism(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n];}));}catch(e){}}function getLocationHref(){try{return document.location.href}catch(e){return ""}}var defaultRetryAfter=6e4;function parseRetryAfterHeader(e,t){if(!t)return defaultRetryAfter;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?defaultRetryAfter:r-e}

var global$1=getGlobalObject(),PREFIX="Sentry Logger ",Logger=function(){function o(){this._enabled=!1;}return o.prototype.disable=function(){this._enabled=!1;},o.prototype.enable=function(){this._enabled=!0;},o.prototype.log=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];this._enabled&&consoleSandbox((function(){global$1.console.log(PREFIX+"[Log]: "+o.join(" "));}));},o.prototype.warn=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];this._enabled&&consoleSandbox((function(){global$1.console.warn(PREFIX+"[Warn]: "+o.join(" "));}));},o.prototype.error=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];this._enabled&&consoleSandbox((function(){global$1.console.error(PREFIX+"[Error]: "+o.join(" "));}));},o}();global$1.__SENTRY__=global$1.__SENTRY__||{};var logger=global$1.__SENTRY__.logger||(global$1.__SENTRY__.logger=new Logger);

function supportsFetch(){if(!("fetch"in getGlobalObject()))return !1;try{return new Headers,new Request(""),new Response,!0}catch(t){return !1}}function isNativeFetch(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function supportsNativeFetch(){if(!supportsFetch())return !1;var t=getGlobalObject();if(isNativeFetch(t.fetch))return !0;var e=!1,r=t.document;if(r&&"function"==typeof r.createElement)try{var n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=isNativeFetch(n.contentWindow.fetch)),r.head.removeChild(n);}catch(t){logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t);}return e}function supportsReferrerPolicy(){if(!supportsFetch())return !1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return !1}}function supportsHistory(){var t=getGlobalObject(),e=t.chrome,r=e&&e.app&&e.app.runtime,n="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return !r&&n}

var lastHref,global$2=getGlobalObject(),handlers={},instrumented={};function instrument(e){if(!instrumented[e])switch(instrumented[e]=!0,e){case"console":instrumentConsole();break;case"dom":instrumentDOM();break;case"xhr":instrumentXHR();break;case"fetch":instrumentFetch();break;case"history":instrumentHistory();break;case"error":instrumentError();break;case"unhandledrejection":instrumentUnhandledRejection();break;default:logger.warn("unknown instrumentation type:",e);}}function addInstrumentationHandler(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(handlers[e.type]=handlers[e.type]||[],handlers[e.type].push(e.callback),instrument(e.type));}function triggerHandlers(e,t){var n,r;if(e&&handlers[e])try{for(var o=__values(handlers[e]||[]),a=o.next();!a.done;a=o.next()){var i=a.value;try{i(t);}catch(t){logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+getFunctionName(i)+"\nError: "+t);}}}catch(e){n={error:e};}finally{try{a&&!a.done&&(r=o.return)&&r.call(o);}finally{if(n)throw n.error}}}function instrumentConsole(){"console"in global$2&&["debug","info","warn","error","log","assert"].forEach((function(e){e in global$2.console&&fill(global$2.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];triggerHandlers("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,global$2.console,n);}}));}));}function instrumentFetch(){supportsNativeFetch()&&fill(global$2,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:getFetchMethod(t),url:getFetchUrl(t)},startTimestamp:Date.now()};return triggerHandlers("fetch",__assign({},r)),e.apply(global$2,t).then((function(e){return triggerHandlers("fetch",__assign(__assign({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw triggerHandlers("fetch",__assign(__assign({},r),{endTimestamp:Date.now(),error:e})),e}))}}));}function getFetchMethod(e){return void 0===e&&(e=[]),"Request"in global$2&&isInstanceOf(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function getFetchUrl(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in global$2&&isInstanceOf(e[0],Request)?e[0].url:String(e[0])}function instrumentXHR(){if("XMLHttpRequest"in global$2){var e=[],t=[],n=XMLHttpRequest.prototype;fill(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=this,i=r[1];a.__sentry_xhr__={method:isString(r[0])?r[0].toUpperCase():r[0],url:r[1]},isString(i)&&"POST"===a.__sentry_xhr__.method&&i.match(/sentry_key/)&&(a.__sentry_own_request__=!0);var l=function(){if(4===a.readyState){try{a.__sentry_xhr__&&(a.__sentry_xhr__.status_code=a.status);}catch(e){}try{var n=e.indexOf(a);if(-1!==n){e.splice(n);var o=t.splice(n)[0];a.__sentry_xhr__&&void 0!==o[0]&&(a.__sentry_xhr__.body=o[0]);}}catch(e){}triggerHandlers("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:a});}};return "onreadystatechange"in a&&"function"==typeof a.onreadystatechange?fill(a,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return l(),e.apply(a,t)}})):a.addEventListener("readystatechange",l),n.apply(a,r)}})),fill(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.push(this),t.push(r),triggerHandlers("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}));}}function instrumentHistory(){if(supportsHistory()){var e=global$2.onpopstate;global$2.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=global$2.location.href,o=lastHref;if(lastHref=r,triggerHandlers("history",{from:o,to:r}),e)return e.apply(this,t)},fill(global$2.history,"pushState",t),fill(global$2.history,"replaceState",t);}function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var o=lastHref,a=String(r);lastHref=a,triggerHandlers("history",{from:o,to:a});}return e.apply(this,t)}}}function instrumentDOM(){"document"in global$2&&(global$2.document.addEventListener("click",domEventHandler("click",triggerHandlers.bind(null,"dom")),!1),global$2.document.addEventListener("keypress",keypressEventHandler(triggerHandlers.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(e){var t=global$2[e]&&global$2[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(fill(t,"addEventListener",(function(e){return function(t,n,r){return n&&n.handleEvent?("click"===t&&fill(n,"handleEvent",(function(e){return function(t){return domEventHandler("click",triggerHandlers.bind(null,"dom"))(t),e.call(this,t)}})),"keypress"===t&&fill(n,"handleEvent",(function(e){return function(t){return keypressEventHandler(triggerHandlers.bind(null,"dom"))(t),e.call(this,t)}}))):("click"===t&&domEventHandler("click",triggerHandlers.bind(null,"dom"),!0)(this),"keypress"===t&&keypressEventHandler(triggerHandlers.bind(null,"dom"))(this)),e.call(this,t,n,r)}})),fill(t,"removeEventListener",(function(e){return function(t,n,r){try{e.call(this,t,n.__sentry_wrapped__,r);}catch(e){}return e.call(this,t,n,r)}})));})));}var keypressTimeout,lastCapturedEvent,debounceDuration=1e3,debounceTimer=0;function domEventHandler(e,t,n){return void 0===n&&(n=!1),function(r){keypressTimeout=void 0,r&&lastCapturedEvent!==r&&(lastCapturedEvent=r,debounceTimer&&clearTimeout(debounceTimer),n?debounceTimer=setTimeout((function(){t({event:r,name:e});})):t({event:r,name:e}));}}function keypressEventHandler(e){return function(t){var n;try{n=t.target;}catch(e){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(keypressTimeout||domEventHandler("input",e)(t),clearTimeout(keypressTimeout),keypressTimeout=setTimeout((function(){keypressTimeout=void 0;}),debounceDuration));}}var _oldOnErrorHandler=null;function instrumentError(){_oldOnErrorHandler=global$2.onerror,global$2.onerror=function(e,t,n,r,o){return triggerHandlers("error",{column:r,error:o,line:n,msg:e,url:t}),!!_oldOnErrorHandler&&_oldOnErrorHandler.apply(this,arguments)};}var _oldOnUnhandledRejectionHandler=null;function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=global$2.onunhandledrejection,global$2.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!_oldOnUnhandledRejectionHandler||_oldOnUnhandledRejectionHandler.apply(this,arguments)};}

var States;!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED";}(States||(States={}));var SyncPromise=function(){function t(t){var e=this;this._state=States.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(States.RESOLVED,t);},this._reject=function(t){e._setResult(States.REJECTED,t);},this._setResult=function(t,n){e._state===States.PENDING&&(isThenable(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()));},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers();},this._executeHandlers=function(){if(e._state!==States.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===States.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===States.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0);}));}};try{t(this._resolve,this._reject);}catch(t){this._reject(t);}}return t.resolve=function(e){return new t((function(t){t(e);}))},t.reject=function(e){return new t((function(t,n){n(e);}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach((function(e,s){t.resolve(e).then((function(t){o[s]=t,0===(i-=1)&&n(o);})).then(null,r);}));}else n([]);else r(new TypeError("Promise.all requires an array as input."));}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,i){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void i(t)}else t(n);},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void i(t)}else i(e);}});}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var i,o;return n.then((function(t){o=!1,i=t,e&&e();}),(function(t){o=!0,i=t,e&&e();})).then((function(){o?r(i):t(i);}))}))},t.prototype.toString=function(){return "[object SyncPromise]"},t}();

var PromiseBuffer=function(){function t(t){this._limit=t,this._buffer=[];}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var r=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then((function(){return r.remove(t)})).then(null,(function(){return r.remove(t).then(null,(function(){}))})),t):SyncPromise.reject(new SentryError("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var r=this;return new SyncPromise((function(e){var n=setTimeout((function(){t&&t>0&&e(!1);}),t);SyncPromise.all(r._buffer).then((function(){clearTimeout(n),e(!0);})).then(null,(function(){e(!0);}));}))},t}();

var dateTimestampSource={nowSeconds:function(){return Date.now()/1e3}};function getBrowserPerformance(){var e=getGlobalObject().performance;if(e&&e.now)return {now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}function getNodePerformance(){try{return dynamicRequire(module,"perf_hooks").performance}catch(e){return}}var platformPerformance=isNodeEnv()?getNodePerformance():getBrowserPerformance(),timestampSource=void 0===platformPerformance?dateTimestampSource:{nowSeconds:function(){return (platformPerformance.timeOrigin+platformPerformance.now())/1e3}};var dateTimestampInSeconds=dateTimestampSource.nowSeconds.bind(dateTimestampSource);var timestampInSeconds=timestampSource.nowSeconds.bind(timestampSource);var timestampWithMs=timestampInSeconds;var browserPerformanceTimeOrigin=function(){var e=getGlobalObject().performance;if(e)return e.timeOrigin?e.timeOrigin:e.timing&&e.timing.navigationStart||Date.now()}();

var Scope=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={};}return t.clone=function(s){var e=new t;return s&&(e._breadcrumbs=__spread(s._breadcrumbs),e._tags=__assign({},s._tags),e._extra=__assign({},s._extra),e._contexts=__assign({},s._contexts),e._user=s._user,e._level=s._level,e._span=s._span,e._session=s._session,e._transactionName=s._transactionName,e._fingerprint=s._fingerprint,e._eventProcessors=__spread(s._eventProcessors)),e},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t);},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.setTags=function(t){return this._tags=__assign(__assign({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,s){var e;return this._tags=__assign(__assign({},this._tags),((e={})[t]=s,e)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=__assign(__assign({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,s){var e;return this._extra=__assign(__assign({},this._extra),((e={})[t]=s,e)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,s){var e;return null===s?delete this._contexts[t]:this._contexts=__assign(__assign({},this._contexts),((e={})[t]=s,e)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,s,e,n,i=this.getSpan();return (null===(t=i)||void 0===t?void 0:t.transaction)?null===(s=i)||void 0===s?void 0:s.transaction:(null===(n=null===(e=i)||void 0===e?void 0:e.spanRecorder)||void 0===n?void 0:n.spans[0])?i.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(s){if(!s)return this;if("function"==typeof s){var e=s(this);return e instanceof t?e:this}return s instanceof t?(this._tags=__assign(__assign({},this._tags),s._tags),this._extra=__assign(__assign({},this._extra),s._extra),this._contexts=__assign(__assign({},this._contexts),s._contexts),s._user&&Object.keys(s._user).length&&(this._user=s._user),s._level&&(this._level=s._level),s._fingerprint&&(this._fingerprint=s._fingerprint)):isPlainObject(s)&&(s=s,this._tags=__assign(__assign({},this._tags),s.tags),this._extra=__assign(__assign({},this._extra),s.extra),this._contexts=__assign(__assign({},this._contexts),s.contexts),s.user&&(this._user=s.user),s.level&&(this._level=s.level),s.fingerprint&&(this._fingerprint=s.fingerprint)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,s){var e=__assign({timestamp:dateTimestampInSeconds()},t);return this._breadcrumbs=void 0!==s&&s>=0?__spread(this._breadcrumbs,[e]).slice(-s):__spread(this._breadcrumbs,[e]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,s){var e;if(this._extra&&Object.keys(this._extra).length&&(t.extra=__assign(__assign({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=__assign(__assign({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=__assign(__assign({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=__assign(__assign({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=__assign({trace:this._span.getTraceContext()},t.contexts);var n=null===(e=this._span.transaction)||void 0===e?void 0:e.name;n&&(t.tags=__assign({transaction:n},t.tags));}return this._applyFingerprint(t),t.breadcrumbs=__spread(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(__spread(getGlobalEventProcessors(),this._eventProcessors),t,s)},t.prototype._notifyEventProcessors=function(t,s,e,n){var i=this;return void 0===n&&(n=0),new SyncPromise((function(r,o){var _=t[n];if(null===s||"function"!=typeof _)r(s);else {var a=_(__assign({},s),e);isThenable(a)?a.then((function(s){return i._notifyEventProcessors(t,s,e,n+1).then(r)})).then(null,o):i._notifyEventProcessors(t,a,e,n+1).then(r).then(null,o);}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(s){s(t);})),this._notifyingListeners=!1);},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint;},t}();function getGlobalEventProcessors(){var t=getGlobalObject();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(t){getGlobalEventProcessors().push(t);}

var Session=function(){function t(t){this.errors=0,this.sid=uuid4(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=SessionStatus.Ok,t&&this.update(t);}return t.prototype.update=function(t){void 0===t&&(t={}),t.user&&(t.user.ip_address&&(this.ipAddress=t.user.ip_address),t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Date.now(),t.sid&&(this.sid=32===t.sid.length?t.sid:uuid4()),t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),"number"==typeof t.duration?this.duration=t.duration:this.duration=this.timestamp-this.started,t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),t.ipAddress&&(this.ipAddress=t.ipAddress),t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status);},t.prototype.close=function(t){t?this.update({status:t}):this.status===SessionStatus.Ok?this.update({status:SessionStatus.Exited}):this.update();},t.prototype.toJSON=function(){return dropUndefinedKeys({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}();

var API_VERSION=3;var DEFAULT_BREADCRUMBS=100,MAX_BREADCRUMBS=100,Hub=function(){function t(t,e,n){void 0===e&&(e=new Scope),void 0===n&&(n=API_VERSION),this._version=n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t);}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations();},t.prototype.pushScope=function(){var t=Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return !(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e);}finally{this.popScope();}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=uuid4(),r=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t;}r={originalException:t,syntheticException:o};}return this._invokeClient("captureException",t,__assign(__assign({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=uuid4(),o=n;if(!n){var i=void 0;try{throw new Error(t)}catch(t){i=t;}o={originalException:t,syntheticException:i};}return this._invokeClient("captureMessage",t,e,__assign(__assign({},o),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=uuid4();return this._invokeClient("captureEvent",t,__assign(__assign({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},s=i.beforeBreadcrumb,a=void 0===s?null:s,c=i.maxBreadcrumbs,p=void 0===c?DEFAULT_BREADCRUMBS:c;if(!(p<=0)){var u=dateTimestampInSeconds(),_=__assign({timestamp:u},t),g=a?consoleSandbox((function(){return a(_,e)})):_;null!==g&&r.addBreadcrumb(g,Math.min(p,MAX_BREADCRUMBS));}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t);},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t);},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t);},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e);},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e);},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e);},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n);},t.prototype.run=function(t){var e=makeMain(this);try{t(this);}finally{makeMain(e);}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return logger.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.startSession=function(t){this.endSession();var e=this.getStackTop(),n=e.scope,r=e.client,o=r&&r.getOptions()||{},i=o.release,s=o.environment,a=new Session(__assign(__assign({release:i,environment:s},n&&{user:n.getUser()}),t));return n&&n.setSession(a),a},t.prototype.endSession=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&(r.close(),n&&n.captureSession&&n.captureSession(r),e.setSession());}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),i=o.scope,s=o.client;s&&s[t]&&(e=s)[t].apply(e,__spread(n,[i]));},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=getMainCarrier(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);logger.warn("Extension method "+t+" couldn't be found, doing nothing.");},t}();function getMainCarrier(){var t=getGlobalObject();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function makeMain(t){var e=getMainCarrier(),n=getHubFromCarrier(e);return setHubOnCarrier(e,t),n}function getCurrentHub(){var t=getMainCarrier();return hasHubOnCarrier(t)&&!getHubFromCarrier(t).isOlderThan(API_VERSION)||setHubOnCarrier(t,new Hub),isNodeEnv()?getHubFromActiveDomain(t):getHubFromCarrier(t)}function getActiveDomain(){var t=getMainCarrier().__SENTRY__;return t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active}function getHubFromActiveDomain(t){try{var e=getActiveDomain();if(!e)return getHubFromCarrier(t);if(!hasHubOnCarrier(e)||getHubFromCarrier(e).isOlderThan(API_VERSION)){var n=getHubFromCarrier(t).getStackTop();setHubOnCarrier(e,new Hub(n.client,Scope.clone(n.scope)));}return getHubFromCarrier(e)}catch(e){return getHubFromCarrier(t)}}function hasHubOnCarrier(t){return !!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function getHubFromCarrier(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Hub),t.__SENTRY__.hub}function setHubOnCarrier(t,e){return !!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}

function callOnHub(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=getCurrentHub();if(r&&r[t])return r[t].apply(r,__spread(n));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function captureException(t,n){var e;try{throw new Error("Sentry syntheticException")}catch(t){e=t;}return callOnHub("captureException",t,{captureContext:n,originalException:t,syntheticException:e})}function captureMessage(t,n){var e;try{throw new Error(t)}catch(t){e=t;}return callOnHub("captureMessage",t,"string"==typeof n?n:void 0,__assign({originalException:t,syntheticException:e},"string"!=typeof n?{captureContext:n}:void 0))}function setContext(t,n){callOnHub("setContext",t,n);}function withScope(t){callOnHub("withScope",t);}

var SENTRY_API_VERSION="7",API=function(){function t(t){this.dsn=t,this._dsnObject=new Dsn(t);}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.getBaseApiEndpoint=function(){var t=this._dsnObject,e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return (t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,o=["Sentry sentry_version="+SENTRY_API_VERSION];return o.push("sentry_client="+t+"/"+e),o.push("sentry_key="+n.user),n.pass&&o.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":o.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",o=[];for(var r in o.push("dsn="+e.toString()),t)if("dsn"!==r)if("user"===r){if(!t.user)continue;t.user.name&&o.push("name="+encodeURIComponent(t.user.name)),t.user.email&&o.push("email="+encodeURIComponent(t.user.email));}else o.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return o.length?n+"?"+o.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return ""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t={sentry_key:this._dsnObject.user,sentry_version:SENTRY_API_VERSION};return urlEncode(t)},t}();

var installedIntegrations=[];function getIntegrationsToSetup(e){var n=e.defaultIntegrations&&__spread(e.defaultIntegrations)||[],t=e.integrations,r=[];if(Array.isArray(t)){var a=t.map((function(e){return e.name})),o=[];n.forEach((function(e){-1===a.indexOf(e.name)&&-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name));})),t.forEach((function(e){-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name));}));}else "function"==typeof t?(r=t(n),r=Array.isArray(r)?r:[r]):r=__spread(n);var i=r.map((function(e){return e.name})),s="Debug";return -1!==i.indexOf(s)&&r.push.apply(r,__spread(r.splice(i.indexOf(s),1))),r}function setupIntegration(e){-1===installedIntegrations.indexOf(e.name)&&(e.setupOnce(addGlobalEventProcessor,getCurrentHub),installedIntegrations.push(e.name),logger.log("Integration installed: "+e.name));}function setupIntegrations(e){var n={};return getIntegrationsToSetup(e).forEach((function(e){n[e.name]=e,setupIntegration(e);})),n}

var BaseClient=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new Dsn(t.dsn));}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e;}))),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,s=isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(s.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e;}))),o},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e;}))),r},e.prototype.captureSession=function(e){e.release?this._sendSession(e):logger.warn("Discarded session because of missing release");},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=setupIntegrations(this._options));},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return logger.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i,o=!1,s=!1,a=t.exception&&t.exception.values;if(a){s=!0;try{for(var u=__values(a),c=u.next();!c.done;c=u.next()){var p=c.value.mechanism;if(p&&!1===p.handled){o=!0;break}}}catch(e){n={error:e};}finally{try{c&&!c.done&&(r=u.return)&&r.call(u);}finally{if(n)throw n.error}}}var l=t.user;if(!e.userAgent){var _=t.request?t.request.headers:{};for(var d in _)if("user-agent"===d.toLowerCase()){i=_[d];break}}e.update(__assign(__assign({},o&&{status:SessionStatus.Crashed}),{user:l,userAgent:i,errors:e.errors+Number(s||o)}));},e.prototype._sendSession=function(e){this._getBackend().sendSession(e);},e.prototype._isClientProcessing=function(e){var t=this;return new SyncPromise((function(n){var r=0,i=setInterval((function(){0==t._processing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)));}),1);}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return !1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,s=__assign(__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:uuid4()),timestamp:e.timestamp||dateTimestampInSeconds()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=t;n&&n.captureContext&&(a=Scope.clone(a).update(n.captureContext));var u=SyncPromise.resolve(s);return a&&(u=a.applyToEvent(s,n)),u.then((function(e){return "number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=__assign(__assign(__assign(__assign(__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return __assign(__assign({},e),e.data&&{data:normalize(e.data,t)})}))}),e.user&&{user:normalize(e.user,t)}),e.contexts&&{contexts:normalize(e.contexts,t)}),e.extra&&{extra:normalize(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,s=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=truncate(e.message,s));var a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=truncate(a.value,s));var u=e.request;u&&u.url&&(u.url=truncate(u.url,s));},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,n=Object.keys(this._integrations);t&&n.length>0&&(t.integrations=n);},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e);},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){logger.error(e);}))},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),o=i.beforeSend,s=i.sampleRate;if(!this._isEnabled())return SyncPromise.reject(new SentryError("SDK not enabled, will not send event."));var a="transaction"===e.type;return !a&&"number"==typeof s&&Math.random()>s?SyncPromise.reject(new SentryError("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new SentryError("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||a||!o)return e;var n=o(e,t);if(void 0===n)throw new SentryError("`beforeSend` method has to return `null` or a valid event.");return isThenable(n)?n.then((function(e){return e}),(function(e){throw new SentryError("beforeSend rejected with "+e)})):n})).then((function(e){if(null===e)throw new SentryError("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return !a&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e})).then(null,(function(e){if(e instanceof SentryError)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}));},e}();

var NoopTransport=function(){function o(){}return o.prototype.sendEvent=function(o){return SyncPromise.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Status.Skipped})},o.prototype.close=function(o){return SyncPromise.resolve(!0)},o}();

var BaseBackend=function(){function n(n){this._options=n,this._options.dsn||logger.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport();}return n.prototype.eventFromException=function(n,t){throw new SentryError("Backend has to implement `eventFromException` method")},n.prototype.eventFromMessage=function(n,t,o){throw new SentryError("Backend has to implement `eventFromMessage` method")},n.prototype.sendEvent=function(n){this._transport.sendEvent(n).then(null,(function(n){logger.error("Error while sending event: "+n);}));},n.prototype.sendSession=function(n){this._transport.sendSession?this._transport.sendSession(n).then(null,(function(n){logger.error("Error while sending session: "+n);})):logger.warn("Dropping session because custom transport doesn't implement sendSession");},n.prototype.getTransport=function(){return this._transport},n.prototype._setupTransport=function(){return new NoopTransport},n}();

function sessionToSentryRequest(t,e){return {body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(t),type:"session",url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function eventToSentryRequest(t,e){var n=t.tags||{},r=n.__sentry_samplingMethod,s=n.__sentry_sampleRate,i=__rest(n,["__sentry_samplingMethod","__sentry_sampleRate"]);t.tags=i;var o="transaction"===t.type,y={body:JSON.stringify(t),type:t.type||"event",url:o?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(o){var _=JSON.stringify({event_id:t.event_id,sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:t.type,sample_rates:[{id:r,rate:s}]})+"\n"+y.body;y.body=_;}return y}

function initAndBind(e,r){!0===r.debug&&logger.enable();var n=getCurrentHub(),t=new e(r);n.bindClient(t);}

var originalFunctionToString,FunctionToString=function(){function n(){this.name=n.id;}return n.prototype.setupOnce=function(){originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var i=this.__sentry_original__||this;return originalFunctionToString.apply(i,n)};},n.id="FunctionToString",n}();

var DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],InboundFilters=function(){function e(r){void 0===r&&(r={}),this._options=r,this.name=e.id;}return e.prototype.setupOnce=function(){addGlobalEventProcessor((function(r){var t=getCurrentHub();if(!t)return r;var n=t.getIntegration(e);if(n){var o=t.getClient(),i=o?o.getOptions():{},s=n._mergeOptions(i);if(n._shouldDropEvent(r,s))return null}return r}));},e.prototype._shouldDropEvent=function(e,r){return this._isSentryError(e,r)?(logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+getEventDescription(e)),!0):this._isIgnoredError(e,r)?(logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+getEventDescription(e)),!0):this._isDeniedUrl(e,r)?(logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,r)&&(logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,r){if(!r.ignoreInternal)return !1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return !1}},e.prototype._isIgnoredError=function(e,r){return !(!r.ignoreErrors||!r.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return r.ignoreErrors.some((function(r){return isMatchingPattern(e,r)}))}))},e.prototype._isDeniedUrl=function(e,r){if(!r.denyUrls||!r.denyUrls.length)return !1;var t=this._getEventFilterUrl(e);return !!t&&r.denyUrls.some((function(e){return isMatchingPattern(t,e)}))},e.prototype._isAllowedUrl=function(e,r){if(!r.allowUrls||!r.allowUrls.length)return !0;var t=this._getEventFilterUrl(e);return !t||r.allowUrls.some((function(e){return isMatchingPattern(t,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],DEFAULT_IGNORE_ERRORS),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return [e.message];if(e.exception)try{var r=e.exception.values&&e.exception.values[0]||{},t=r.type,n=void 0===t?"":t,o=r.value,i=void 0===o?"":o;return [""+i,n+": "+i]}catch(r){return logger.error("Cannot extract message for event "+getEventDescription(e)),[]}return []},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var r=e.stacktrace.frames;return r&&r[r.length-1].filename||null}if(e.exception){var t=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return t&&t[t.length-1].filename||null}return null}catch(r){return logger.error("Cannot extract url for event "+getEventDescription(e)),null}},e.id="InboundFilters",e}();

var UNKNOWN_FUNCTION="?",chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/,reactMinifiedRegexp=/Minified React error #\d+;/i;function computeStackTrace(e){var n=null,r=0;e&&("number"==typeof e.framesToPop?r=e.framesToPop:reactMinifiedRegexp.test(e.message)&&(r=1));try{if(n=computeStackTraceFromStacktraceProp(e))return popFrames(n,r)}catch(e){}try{if(n=computeStackTraceFromStackProp(e))return popFrames(n,r)}catch(e){}return {message:extractMessage(e),name:e&&e.name,stack:[],failed:!0}}function computeStackTraceFromStackProp(e){if(!e||!e.stack)return null;for(var n,r,a,c=[],t=e.stack.split("\n"),s=0;s<t.length;++s){if(r=chrome.exec(t[s])){var l=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(n=chromeEval.exec(r[2]))&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),a={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||UNKNOWN_FUNCTION,args:l?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null};}else if(r=winjs.exec(t[s]))a={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+r[3],column:r[4]?+r[4]:null};else {if(!(r=gecko.exec(t[s])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(n=geckoEval.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]=""):0!==s||r[5]||void 0===e.columnNumber||(c[0].column=e.columnNumber+1),a={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null};}!a.func&&a.line&&(a.func=UNKNOWN_FUNCTION),c.push(a);}return c.length?{message:extractMessage(e),name:e.name,stack:c}:null}function computeStackTraceFromStacktraceProp(e){if(!e||!e.stacktrace)return null;for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,a=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,c=e.stacktrace.split("\n"),t=[],s=0;s<c.length;s+=2){var l=null;(n=r.exec(c[s]))?l={url:n[2],func:n[3],args:[],line:+n[1],column:null}:(n=a.exec(c[s]))&&(l={url:n[6],func:n[3]||n[4],args:n[5]?n[5].split(","):[],line:+n[1],column:+n[2]}),l&&(!l.func&&l.line&&(l.func=UNKNOWN_FUNCTION),t.push(l));}return t.length?{message:extractMessage(e),name:e.name,stack:t}:null}function popFrames(e,n){try{return __assign(__assign({},e),{stack:e.stack.slice(n)})}catch(n){return e}}function extractMessage(e){var n=e&&e.message;return n?n.error&&"string"==typeof n.error.message?n.error.message:n:"No error message"}

var STACKTRACE_LIMIT=50;function exceptionFromStacktrace(e){var r=prepareFramesForEvent(e.stack),t={type:e.name,value:e.message};return r&&r.length&&(t.stacktrace={frames:r}),void 0===t.type&&""===t.value&&(t.value="Unrecoverable error caught"),t}function eventFromPlainObject(e,r,t){var n={exception:{values:[{type:isEvent(e)?e.constructor.name:t?"UnhandledRejection":"Error",value:"Non-Error "+(t?"promise rejection":"exception")+" captured with keys: "+extractExceptionKeysForMessage(e)}]},extra:{__serialized__:normalizeToSize(e)}};if(r){var a=prepareFramesForEvent(computeStackTrace(r).stack);n.stacktrace={frames:a};}return n}function eventFromStacktrace(e){return {exception:{values:[exceptionFromStacktrace(e)]}}}function prepareFramesForEvent(e){if(!e||!e.length)return [];var r=e,t=r[0].func||"",n=r[r.length-1].func||"";return -1===t.indexOf("captureMessage")&&-1===t.indexOf("captureException")||(r=r.slice(1)),-1!==n.indexOf("sentryWrapped")&&(r=r.slice(0,-1)),r.slice(0,STACKTRACE_LIMIT).map((function(e){return {colno:null===e.column?void 0:e.column,filename:e.url||r[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}

function eventFromException(e,t,r){var n=eventFromUnknownInput(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return addExceptionMechanism(n,{handled:!0,type:"generic"}),n.level=Severity.Error,r&&r.event_id&&(n.event_id=r.event_id),SyncPromise.resolve(n)}function eventFromMessage(e,t,r,n){void 0===r&&(r=Severity.Info);var i=eventFromString(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=r,n&&n.event_id&&(i.event_id=n.event_id),SyncPromise.resolve(i)}function eventFromUnknownInput(e,t,r){var n;if(void 0===r&&(r={}),isErrorEvent(e)&&e.error)return e=e.error,n=eventFromStacktrace(computeStackTrace(e));if(isDOMError(e)||isDOMException(e)){var i=e,o=i.name||(isDOMError(i)?"DOMError":"DOMException"),a=i.message?o+": "+i.message:o;return n=eventFromString(a,t,r),addExceptionTypeValue(n,a),"code"in i&&(n.tags=__assign(__assign({},n.tags),{"DOMException.code":""+i.code})),n}return isError(e)?n=eventFromStacktrace(computeStackTrace(e)):isPlainObject(e)||isEvent(e)?(n=eventFromPlainObject(e,t,r.rejection),addExceptionMechanism(n,{synthetic:!0}),n):(n=eventFromString(e,t,r),addExceptionTypeValue(n,""+e,void 0),addExceptionMechanism(n,{synthetic:!0}),n)}function eventFromString(e,t,r){void 0===r&&(r={});var n={message:e};if(r.attachStacktrace&&t){var i=computeStackTrace(t),o=prepareFramesForEvent(i.stack);n.stacktrace={frames:o};}return n}

var BaseTransport=function(){function t(t){this.options=t,this._buffer=new PromiseBuffer(30),this._rateLimits={},this._api=new API(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth();}return t.prototype.sendEvent=function(t){throw new SentryError("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,r=t.response,i=t.headers,n=t.resolve,s=t.reject,o=Status.fromHttpCode(r.status);this._handleRateLimit(i)&&logger.warn("Too many requests, backing off until: "+this._disabledUntil(e)),o!==Status.Success?s(r):n({status:o});},t.prototype._disabledUntil=function(t){return this._rateLimits[t]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,r,i,n,s=Date.now(),o=t["x-sentry-rate-limits"],a=t["retry-after"];if(o){try{for(var l=__values(o.trim().split(",")),p=l.next();!p.done;p=l.next()){var u=p.value.split(":",2),f=parseInt(u[0],10),h=1e3*(isNaN(f)?60:f);try{for(var d=(i=void 0,__values(u[1].split(";"))),y=d.next();!y.done;y=d.next()){var m=y.value;this._rateLimits[m||"all"]=new Date(s+h);}}catch(t){i={error:t};}finally{try{y&&!y.done&&(n=d.return)&&n.call(d);}finally{if(i)throw i.error}}}}catch(t){e={error:t};}finally{try{p&&!p.done&&(r=l.return)&&r.call(l);}finally{if(e)throw e.error}}return !0}return !!a&&(this._rateLimits.all=new Date(s+parseRetryAfterHeader(s,a)),!0)},t}();

var global$3=getGlobalObject(),FetchTransport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(eventToSentryRequest(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(sessionToSentryRequest(e,this._api),e)},t.prototype._sendRequest=function(e,t){var r=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var s={body:e.body,method:"POST",referrerPolicy:supportsReferrerPolicy()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(s,this.options.fetchParameters),void 0!==this.options.headers&&(s.headers=this.options.headers),this._buffer.add(new SyncPromise((function(t,o){global$3.fetch(e.url,s).then((function(s){var n={"x-sentry-rate-limits":s.headers.get("X-Sentry-Rate-Limits"),"retry-after":s.headers.get("Retry-After")};r._handleResponse({requestType:e.type,response:s,headers:n,resolve:t,reject:o});})).catch(o);})))},t}(BaseTransport);

var XHRTransport=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(eventToSentryRequest(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(sessionToSentryRequest(e,this._api),e)},t.prototype._sendRequest=function(e,t){var s=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add(new SyncPromise((function(t,r){var n=new XMLHttpRequest;for(var o in n.onreadystatechange=function(){if(4===n.readyState){var o={"x-sentry-rate-limits":n.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":n.getResponseHeader("Retry-After")};s._handleResponse({requestType:e.type,response:n,headers:o,resolve:t,reject:r});}},n.open("POST",e.url),s.options.headers)s.options.headers.hasOwnProperty(o)&&n.setRequestHeader(o,s.options.headers[o]);n.send(e.body);})))},t}(BaseTransport);

var BrowserBackend=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.eventFromException=function(t,r){return eventFromException(this._options,t,r)},r.prototype.eventFromMessage=function(t,r,o){return void 0===r&&(r=Severity.Info),eventFromMessage(this._options,t,r,o)},r.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var r=__assign(__assign({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(r):supportsFetch()?new FetchTransport(r):new XHRTransport(r)},r}(BaseBackend);

var ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError+=1,setTimeout((function(){ignoreOnError-=1;}));}function wrap(e,r,t){if(void 0===r&&(r={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(r){return e}var n=function(){var n=Array.prototype.slice.call(arguments);try{t&&"function"==typeof t&&t.apply(this,arguments);var o=n.map((function(e){return wrap(e,r)}));return e.handleEvent?e.handleEvent.apply(this,o):e.apply(this,o)}catch(e){throw ignoreNextOnError(),withScope((function(t){t.addEventProcessor((function(e){var t=__assign({},e);return r.mechanism&&(addExceptionTypeValue(t,void 0,void 0),addExceptionMechanism(t,r.mechanism)),t.extra=__assign(__assign({},t.extra),{arguments:n}),t})),captureException(e);})),e}};try{for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);}catch(e){}e.prototype=e.prototype||{},n.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:n}),Object.defineProperties(n,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:function(){return e.name}});}catch(e){}return n}function injectReportDialog(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var r=document.createElement("script");r.async=!0,r.src=new API(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(r.onload=e.onLoad),(document.head||document.body).appendChild(r);}else logger.error("Missing dsn option in showReportDialog call");else logger.error("Missing eventId option in showReportDialog call");}

var GlobalHandlers=function(){function e(n){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=__assign({onerror:!0,onunhandledrejection:!0},n);}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(logger.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(logger.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler());},e.prototype._installGlobalOnErrorHandler=function(){var n=this;this._onErrorHandlerInstalled||(addInstrumentationHandler({callback:function(t){var r=t.error,o=getCurrentHub(),a=o.getIntegration(e),i=r&&!0===r.__sentry_own_request__;if(a&&!shouldIgnoreOnError()&&!i){var l=o.getClient(),c=isPrimitive(r)?n._eventFromIncompleteOnError(t.msg,t.url,t.line,t.column):n._enhanceEventWithInitialFrame(eventFromUnknownInput(r,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!1}),t.url,t.line,t.column);addExceptionMechanism(c,{handled:!1,type:"onerror"}),o.captureEvent(c,{originalException:r});}},type:"error"}),this._onErrorHandlerInstalled=!0);},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var n=this;this._onUnhandledRejectionHandlerInstalled||(addInstrumentationHandler({callback:function(t){var r=t;try{"reason"in t?r=t.reason:"detail"in t&&"reason"in t.detail&&(r=t.detail.reason);}catch(e){}var o=getCurrentHub(),a=o.getIntegration(e),i=r&&!0===r.__sentry_own_request__;if(!a||shouldIgnoreOnError()||i)return !0;var l=o.getClient(),c=isPrimitive(r)?n._eventFromRejectionWithPrimitive(r):eventFromUnknownInput(r,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!0});c.level=Severity.Error,addExceptionMechanism(c,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(c,{originalException:r});},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0);},e.prototype._eventFromIncompleteOnError=function(e,n,t,r){var o,a=isErrorEvent(e)?e.message:e;if(isString(a)){var i=a.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);i&&(o=i[1],a=i[2]);}var l={exception:{values:[{type:o||"Error",value:a}]}};return this._enhanceEventWithInitialFrame(l,n,t,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return {exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,n,t,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,a=isNaN(parseInt(t,10))?void 0:t,i=isString(n)&&n.length>0?n:getLocationHref();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:i,function:"?",in_app:!0,lineno:a}),e},e.id="GlobalHandlers",e}();

var DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],TryCatch=function(){function t(e){this.name=t.id,this._options=__assign({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e);}return t.prototype.setupOnce=function(){var t=getGlobalObject();(this._options.setTimeout&&fill(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&fill(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&fill(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&fill(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:DEFAULT_EVENT_TARGET).forEach(this._wrapEventTarget.bind(this));},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=wrap(r,{mechanism:{data:{function:getFunctionName(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,wrap(e,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=getGlobalObject(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=wrap(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:getFunctionName(r),target:t},handled:!0,type:"instrument"}}));}catch(t){}return e.call(this,n,wrap(r,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(r),target:t},handled:!0,type:"instrument"}}),i)}})),fill(n,"removeEventListener",(function(t){return function(e,n,r){var i,a=n;try{var o=null===(i=a)||void 0===i?void 0:i.__sentry_wrapped__;o&&t.call(this,e,o,r);}catch(t){}return t.call(this,e,a,r)}})));},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(t){t in r&&"function"==typeof r[t]&&fill(r,t,(function(e){var n={mechanism:{data:{function:t,handler:getFunctionName(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=getFunctionName(e.__sentry_original__)),wrap(e,n)}));})),t.apply(this,e)}},t.id="TryCatch",t}();

var Breadcrumbs=function(){function e(t){this.name=e.id,this._options=__assign({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t);}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:getEventDescription(e)},{event:e});},e.prototype.setupOnce=function(){var e=this;this._options.console&&addInstrumentationHandler({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._consoleBreadcrumb.apply(e,__spread(t));},type:"console"}),this._options.dom&&addInstrumentationHandler({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._domBreadcrumb.apply(e,__spread(t));},type:"dom"}),this._options.xhr&&addInstrumentationHandler({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._xhrBreadcrumb.apply(e,__spread(t));},type:"xhr"}),this._options.fetch&&addInstrumentationHandler({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._fetchBreadcrumb.apply(e,__spread(t));},type:"fetch"}),this._options.history&&addInstrumentationHandler({callback:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e._historyBreadcrumb.apply(e,__spread(t));},type:"history"});},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:Severity.fromString(e.level),message:safeJoin(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(safeJoin(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1);}getCurrentHub().addBreadcrumb(t,{input:e.args,level:e.level});},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?htmlTreeAsString(e.event.target):htmlTreeAsString(e.event);}catch(e){t="<unknown>";}0!==t.length&&getCurrentHub().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name});},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},r=t.method,a=t.url,n=t.status_code,o=t.body;getCurrentHub().addBreadcrumb({category:"xhr",data:{method:r,url:a,status_code:n},type:"http"},{xhr:e.xhr,input:o});}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?getCurrentHub().addBreadcrumb({category:"fetch",data:e.fetchData,level:Severity.Error,type:"http"},{data:e.error,input:e.args}):getCurrentHub().addBreadcrumb({category:"fetch",data:__assign(__assign({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})));},e.prototype._historyBreadcrumb=function(e){var t=getGlobalObject(),r=e.from,a=e.to,n=parseUrl(t.location.href),o=parseUrl(r),s=parseUrl(a);o.path||(o=n),n.protocol===s.protocol&&n.host===s.host&&(a=s.relative),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),getCurrentHub().addBreadcrumb({category:"navigation",data:{from:r,to:a}});},e.id="Breadcrumbs",e}();

var DEFAULT_KEY="cause",DEFAULT_LIMIT=5,LinkedErrors=function(){function r(e){void 0===e&&(e={}),this.name=r.id,this._key=e.key||DEFAULT_KEY,this._limit=e.limit||DEFAULT_LIMIT;}return r.prototype.setupOnce=function(){addGlobalEventProcessor((function(e,t){var o=getCurrentHub().getIntegration(r);return o?o._handler(e,t):e}));},r.prototype._handler=function(r,e){if(!(r.exception&&r.exception.values&&e&&isInstanceOf(e.originalException,Error)))return r;var t=this._walkErrorTree(e.originalException,this._key);return r.exception.values=__spread(t,r.exception.values),r},r.prototype._walkErrorTree=function(r,e,t){if(void 0===t&&(t=[]),!isInstanceOf(r[e],Error)||t.length+1>=this._limit)return t;var o=computeStackTrace(r[e]),i=exceptionFromStacktrace(o);return this._walkErrorTree(r[e],e,__spread([i],t))},r.id="LinkedErrors",r}();

var global$4=getGlobalObject(),UserAgent=function(){function e(){this.name=e.id;}return e.prototype.setupOnce=function(){addGlobalEventProcessor((function(r){var t,n,o;if(getCurrentHub().getIntegration(e)){if(!global$4.navigator&&!global$4.location&&!global$4.document)return r;var s=(null===(t=r.request)||void 0===t?void 0:t.url)||(null===(n=global$4.location)||void 0===n?void 0:n.href),a=(global$4.document||{}).referrer,l=(global$4.navigator||{}).userAgent,i=__assign(__assign(__assign({},null===(o=r.request)||void 0===o?void 0:o.headers),a&&{Referer:a}),l&&{"User-Agent":l}),g=__assign(__assign({},s&&{url:s}),{headers:i});return __assign(__assign({},r),{request:g})}return r}));},e.id="UserAgent",e}();

var SDK_NAME="sentry.javascript.browser";var SDK_VERSION="5.30.0";

var BrowserClient=function(e){function r(r){return void 0===r&&(r={}),e.call(this,BrowserBackend,r)||this}return __extends(r,e),r.prototype.showReportDialog=function(e){void 0===e&&(e={}),getGlobalObject().document&&(this._isEnabled()?injectReportDialog(__assign(__assign({},e),{dsn:e.dsn||this.getDsn()})):logger.error("Trying to call showReportDialog with Sentry Client disabled"));},r.prototype._prepareEvent=function(r,t,o){return r.platform=r.platform||"javascript",r.sdk=__assign(__assign({},r.sdk),{name:SDK_NAME,packages:__spread(r.sdk&&r.sdk.packages||[],[{name:"npm:@sentry/browser",version:SDK_VERSION}]),version:SDK_VERSION}),e.prototype._prepareEvent.call(this,r,t,o)},r.prototype._sendEvent=function(r){var t=this.getIntegration(Breadcrumbs);t&&t.addSentryBreadcrumb(r),e.prototype._sendEvent.call(this,r);},r}(BaseClient);

var defaultIntegrations=[new InboundFilters,new FunctionToString,new TryCatch,new Breadcrumbs,new GlobalHandlers,new LinkedErrors,new UserAgent];function init(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=defaultIntegrations),void 0===e.release){var t=getGlobalObject();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id);}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!1),initAndBind(BrowserClient,e),e.autoSessionTracking&&startSessionTracking();}function startSessionTracking(){var e=getGlobalObject(),t=getCurrentHub(),n="complete"===document.readyState,r=!1,o=function(){r&&n&&t.endSession();},i=function(){n=!0,o(),e.removeEventListener("load",i);};t.startSession(),n||e.addEventListener("load",i);try{var a=new PerformanceObserver((function(e,t){e.getEntries().forEach((function(e){"first-contentful-paint"===e.name&&e.startTime<s&&(t.disconnect(),r=!0,o());}));})),s="hidden"===document.visibilityState?0:1/0;document.addEventListener("visibilitychange",(function(e){s=Math.min(s,e.timeStamp);}),{once:!0}),a.observe({type:"paint",buffered:!0});}catch(e){r=!0,o();}}

var bind=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};

var toString=Object.prototype.toString;function isArray(t){return "[object Array]"===toString.call(t)}function isUndefined(t){return void 0===t}function isBuffer(t){return null!==t&&!isUndefined(t)&&null!==t.constructor&&!isUndefined(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function isArrayBuffer(t){return "[object ArrayBuffer]"===toString.call(t)}function isFormData(t){return "undefined"!=typeof FormData&&t instanceof FormData}function isArrayBufferView(t){return "undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function isString$1(t){return "string"==typeof t}function isNumber(t){return "number"==typeof t}function isObject(t){return null!==t&&"object"==typeof t}function isPlainObject$1(t){if("[object Object]"!==toString.call(t))return !1;var r=Object.getPrototypeOf(t);return null===r||r===Object.prototype}function isDate(t){return "[object Date]"===toString.call(t)}function isFile(t){return "[object File]"===toString.call(t)}function isBlob(t){return "[object Blob]"===toString.call(t)}function isFunction(t){return "[object Function]"===toString.call(t)}function isStream(t){return isObject(t)&&isFunction(t.pipe)}function isURLSearchParams(t){return "undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function trim(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return ("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(t,r){if(null!=t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var i=0,e=t.length;i<e;i++)r.call(null,t[i],i,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.call(null,t[s],s,t);}function merge(){var t={};function r(r,i){isPlainObject$1(t[i])&&isPlainObject$1(r)?t[i]=merge(t[i],r):isPlainObject$1(r)?t[i]=merge({},r):isArray(r)?t[i]=r.slice():t[i]=r;}for(var i=0,e=arguments.length;i<e;i++)forEach(arguments[i],r);return t}function extend(t,r,i){return forEach(r,(function(r,e){t[e]=i&&"function"==typeof r?bind(r,i):r;})),t}function stripBOM(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}var utils={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString$1,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject$1,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM};

function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(e,i,r){if(!i)return e;var t;if(r)t=r(i);else if(utils.isURLSearchParams(i))t=i.toString();else {var l=[];utils.forEach(i,(function(e,i){null!=e&&(utils.isArray(e)?i+="[]":e=[e],utils.forEach(e,(function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),l.push(encode(i)+"="+encode(e));})));})),t=l.join("&");}if(t){var n=e.indexOf("#");-1!==n&&(e=e.slice(0,n)),e+=(-1===e.indexOf("?")?"?":"&")+t;}return e};

function InterceptorManager(){this.handlers=[];}InterceptorManager.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},InterceptorManager.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null);},InterceptorManager.prototype.forEach=function(t){utils.forEach(this.handlers,(function(e){null!==e&&t(e);}));};var InterceptorManager_1=InterceptorManager;

var transformData=function(t,r,o){return utils.forEach(o,(function(o){t=o(t,r);})),t};

var isCancel=function(e){return !(!e||!e.__CANCEL__)};

var normalizeHeaderName=function(e,o){utils.forEach(e,(function(r,a){a!==o&&a.toUpperCase()===o.toUpperCase()&&(e[o]=r,delete e[a]);}));};

var enhanceError=function(e,r,s,i,n){return e.config=r,s&&(e.code=s),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return {message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};

var createError=function(r,e,o,n,a){var t=new Error(r);return enhanceError(t,e,o,n,a)};

var settle=function(t,r,e){var o=e.config.validateStatus;e.status&&o&&!o(e.status)?r(createError("Request failed with status code "+e.status,e.config,null,e.request,e)):t(e);};

var cookies=utils.isStandardBrowserEnv()?{write:function(o,e,t,i,n,r){var u=[];u.push(o+"="+encodeURIComponent(e)),utils.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),utils.isString(i)&&u.push("path="+i),utils.isString(n)&&u.push("domain="+n),!0===r&&u.push("secure"),document.cookie=u.join("; ");},read:function(o){var e=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5);}}:{write:function(){},read:function(){return null},remove:function(){}};

var isAbsoluteURL=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};

var combineURLs=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};

var buildFullPath=function(o,e){return o&&!isAbsoluteURL(e)?combineURLs(o,e):e};

var ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(e){var t,r,i,o={};return e?(utils.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=utils.trim(e.substr(0,i)).toLowerCase(),r=utils.trim(e.substr(i+1)),t){if(o[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r;}})),o):o};

var isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function o(t){var o=t;return r&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=o(window.location.href),function(r){var e=utils.isString(r)?o(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return !0};

var xhr=function(e){return new Promise((function(r,o){var t=e.data,s=e.headers;utils.isFormData(t)&&delete s["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var n=e.auth.username||"",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(n+":"+i);}var p=buildFullPath(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),buildURL(p,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in a?parseHeaders(a.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:t,config:e,request:a};settle(r,o,s),a=null;}},a.onabort=function(){a&&(o(createError("Request aborted",e,"ECONNABORTED",a)),a=null);},a.onerror=function(){o(createError("Network Error",e,null,a)),a=null;},a.ontimeout=function(){var r="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(r=e.timeoutErrorMessage),o(createError(r,e,"ECONNABORTED",a)),a=null;},utils.isStandardBrowserEnv()){var l=(e.withCredentials||isURLSameOrigin(p))&&e.xsrfCookieName?cookies.read(e.xsrfCookieName):void 0;l&&(s[e.xsrfHeaderName]=l);}if("setRequestHeader"in a&&utils.forEach(s,(function(e,r){void 0===t&&"content-type"===r.toLowerCase()?delete s[r]:a.setRequestHeader(r,e);})),utils.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType;}catch(r){if("json"!==e.responseType)throw r}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),o(e),a=null);})),t||(t=null),a.send(t);}))};

var DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t);}function getDefaultAdapter(){var e;return "undefined"!=typeof XMLHttpRequest?e=xhr:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(e=xhr),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e);}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],(function(e){defaults.headers[e]={};})),utils.forEach(["post","put","patch"],(function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE);}));var defaults_1=defaults;

function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested();}var dispatchRequest=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t];})),(e.adapter||defaults_1.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData(t.data,t.headers,e.transformResponse),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};

var mergeConfig=function(e,t){t=t||{};var i={},s=["url","method","data"],n=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],r=["validateStatus"];function a(e,t){return utils.isPlainObject(e)&&utils.isPlainObject(t)?utils.merge(e,t):utils.isPlainObject(t)?utils.merge({},t):utils.isArray(t)?t.slice():t}function u(s){utils.isUndefined(t[s])?utils.isUndefined(e[s])||(i[s]=a(void 0,e[s])):i[s]=a(e[s],t[s]);}utils.forEach(s,(function(e){utils.isUndefined(t[e])||(i[e]=a(void 0,t[e]));})),utils.forEach(n,u),utils.forEach(o,(function(s){utils.isUndefined(t[s])?utils.isUndefined(e[s])||(i[s]=a(void 0,e[s])):i[s]=a(void 0,t[s]);})),utils.forEach(r,(function(s){s in t?i[s]=a(e[s],t[s]):s in e&&(i[s]=a(void 0,e[s]));}));var c=s.concat(n).concat(o).concat(r),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return -1===c.indexOf(e)}));return utils.forEach(l,u),i};

function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1};}Axios.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=mergeConfig(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[dispatchRequest,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected);})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected);}));t.length;)o=o.then(t.shift(),t.shift());return o},Axios.prototype.getUri=function(e){return e=mergeConfig(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],(function(e){Axios.prototype[e]=function(t,o){return this.request(mergeConfig(o||{},{method:e,url:t,data:(o||{}).data}))};})),utils.forEach(["post","put","patch"],(function(e){Axios.prototype[e]=function(t,o,r){return this.request(mergeConfig(r||{},{method:e,url:t,data:o}))};}));var Axios_1=Axios;

function Cancel(e){this.message=e;}Cancel.prototype.toString=function(){return "Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;

function CancelToken(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(n){e=n;}));var o=this;n((function(n){o.reason||(o.reason=new Cancel_1(n),e(o.reason));}));}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var n;return {token:new CancelToken((function(e){n=e;})),cancel:n}};var CancelToken_1=CancelToken;

var spread=function(r){return function(e){return r.apply(null,e)}};

var isAxiosError=function(r){return "object"==typeof r&&!0===r.isAxiosError};

function createInstance(o){var r=new Axios_1(o),e=bind(Axios_1.prototype.request,r);return utils.extend(e,Axios_1.prototype,r),utils.extend(e,r),e}var axios=createInstance(defaults_1);axios.Axios=Axios_1,axios.create=function(o){return createInstance(mergeConfig(axios.defaults,o))},axios.Cancel=Cancel_1,axios.CancelToken=CancelToken_1,axios.isCancel=isCancel,axios.all=function(o){return Promise.all(o)},axios.spread=spread,axios.isAxiosError=isAxiosError;var axios_1=axios,default_1=axios;axios_1.default=default_1;

var axios$1=axios_1;

var EXPIRATION_DAYS=30;var DEFAULT_REFRESH_ROTATION_DURATION=864e5*EXPIRATION_DAYS;var DEFAULT_LEEWAY_IN_SECONDS=60;var DEFAULT_REFRESH_RETRY=5;var DEFAULT_REFRESH_EXPIRATION=2592e3;var DEFAULT_SCOPE="openid email profile";var JWT="JWT";var RS256="RS256";var SHA256="S256";var STORAGE_KEY_PREFIX="$cryptr-spa-js$";var ALLOWED_LOCALES=["en","fr"];var ALLOWED_REGIONS=["eu","us"];var CRYPTR_EU_BASE_URL="https://auth.cryptr.eu",CRYPTR_US_BASE_URL="https://auth.cryptr.us";var cryptrBaseUrl=function(r){var e="You must provide region in values ".concat(ALLOWED_REGIONS," found '").concat(r.region,"', if not provide your cryptr_base_url");switch(r.region){case"eu":return CRYPTR_EU_BASE_URL;case"us":return CRYPTR_US_BASE_URL;case void 0:if(r.cryptr_base_url)return r.cryptr_base_url;throw new Error(e);default:throw new Error(e)}};

var Sign;!function(n){n.Invite="invite",n.In="signin",n.Up="signup",n.Refresh="refresh";}(Sign||(Sign={}));

var API_VERSION$1="v1";var tokenParams=function(e,r,t){return {authorization_id:r.id,client_id:e.client_id,code:r.code,code_verifier:t.pkce.code_verifier,grant_type:"authorization_code",nonce:t.nonce}};var refreshTokensParams=function(e,r,t){return {client_id:e.client_id,grant_type:"refresh_token",nonce:r.nonce,refresh_token:t}};var revokeTokenUrl=function(e){return "".concat(cryptrBaseUrl(e),"/api/").concat(API_VERSION$1,"/tenants/").concat(e.tenant_domain,"/").concat(e.client_id,"/oauth/token/revoke")};var tokenUrl=function(e,r,t){return "".concat(cryptrBaseUrl(e),"/api/").concat(API_VERSION$1,"/tenants/").concat(e.tenant_domain,"/").concat(e.client_id,"/").concat(t.pkce.state,"/oauth/").concat(t.sign_type,"/client/").concat(r.id,"/token")};var refreshTokensUrl=function(e,r){return "".concat(cryptrBaseUrl(e),"/api/").concat(API_VERSION$1,"/tenants/").concat(e.tenant_domain,"/").concat(e.client_id,"/").concat(r.pkce.state,"/oauth/client/token")};var Request$1={postAuthorizationCode:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t,n){var o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=tokenUrl(r,t,n),e.abrupt("return",axios$1.post(o,tokenParams(r,t,n)));case 2:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),revokeAccessToken:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t){var n;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=revokeTokenUrl(r),e.abrupt("return",axios$1.post(n,{token:t,token_type_hint:"access_token"}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),revokeRefreshToken:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t){var n;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=revokeTokenUrl(r),e.abrupt("return",axios$1.post(n,{token:t,token_type_hint:"refresh_token"}));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),refreshTokens:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t,n){var o;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=refreshTokensUrl(r,t),e.abrupt("return",axios$1.post(o,refreshTokensParams(r,t,n)));case 2:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),decoratedRequest:function(e,r){if(null==r)return r;if(void 0!==e){var t="Bearer ".concat(e),n=r.headers||{};n.Authorization=t,r.headers=n;}return axios$1(r)}};

var esCookie=createCommonjsModule((function(e,o){var r=commonjsGlobal&&commonjsGlobal.__assign||function(){return (r=Object.assign||function(e){for(var o,r=1,s=arguments.length;r<s;r++)for(var t in o=arguments[r])Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t]);return e}).apply(this,arguments)};function s(e,o){if(!o)return "";var r="; "+e;return !0===o?r:r+"="+o}function t(e,o,r){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(o).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*e.expires),e.expires=o;}return s("Expires",e.expires?e.expires.toUTCString():"")+s("Domain",e.domain)+s("Path",e.path)+s("Secure",e.secure)+s("SameSite",e.sameSite)}(r)}function n(e){for(var o={},r=e?e.split("; "):[],s=/(%[\dA-F]{2})+/gi,t=0;t<r.length;t++){var n=r[t].split("="),i=n.slice(1).join("=");'"'===i.charAt(0)&&(i=i.slice(1,-1));try{o[n[0].replace(s,decodeURIComponent)]=i.replace(s,decodeURIComponent);}catch(e){}}return o}function i(){return n(document.cookie)}function c(e,o,s){document.cookie=t(e,o,r({path:"/"},s));}o.__esModule=!0,o.encode=t,o.parse=n,o.getAll=i,o.get=function(e){return i()[e]},o.set=c,o.remove=function(e,o){c(e,"",r(r({},o),{expires:-1}));};}));unwrapExports(esCookie);var esCookie_1=esCookie.encode;var esCookie_2=esCookie.parse;var esCookie_3=esCookie.getAll;var esCookie_4=esCookie.get;var esCookie_5=esCookie.set;var esCookie_6=esCookie.remove;

var storageKey=function(e){return "".concat(STORAGE_KEY_PREFIX,".store.").concat(e)},Storage={createCookie:function(e,o){var t={key:storageKey(e),body:JSON.stringify(o)},r={};return void 0!==window&&void 0!==window.location&&"https:"===window.location.protocol&&(r={secure:!0,sameSite:"none"}),r.expires=EXPIRATION_DAYS,"undefined"!=typeof document&&esCookie_5(t.key,t.body,r),t},getCookie:function(e){var o;return "undefined"!=typeof document&&(o=esCookie_4(storageKey(e))),void 0===o?{}:JSON.parse(o)},deleteCookie:function(e){return "undefined"!=typeof document&&esCookie_6(storageKey(e)),!0},clearCookies:function(e){var o=storageKey(e);if("undefined"!=typeof document){var t=esCookie_3();Object.keys(t).forEach((function(e){e.startsWith(storageKey("".concat(STORAGE_KEY_PREFIX,".transaction")))&&esCookie_6(e),e.startsWith(storageKey("".concat(STORAGE_KEY_PREFIX,".refresh")))&&esCookie_6(e);})),esCookie_6(o);}return !0}};

var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}

var REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

function validate(t){return "string"==typeof t&&REGEX.test(t)}

for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate(o))throw TypeError("Stringified UUID is invalid");return o}

function v4(r,n,i){var t=(r=r||{}).random||(r.rng||rng)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,n){i=i||0;for(var f=0;f<16;++f)n[i+f]=t[f];return n}return stringify(t)}

var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(r){this.message=r;}function polyfill(r){var o=String(r).replace(/=+$/,"");if(o.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,e,t=0,n=0,i="";e=o.charAt(n++);~e&&(a=t%4?64*a+e:e,t++%4)?i+=String.fromCharCode(255&a>>(-2*t&6)):0)e=chars.indexOf(e);return i}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";var atob="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||polyfill;

function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,(function(e,r){var o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}var base64_url_decode=function(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw "Illegal base64url string!"}try{return b64DecodeUnicode(r)}catch(e){return atob(r)}};

function InvalidTokenError(r){this.message=r;}InvalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";var lib=function(r,o){if("string"!=typeof r)throw new InvalidTokenError("Invalid token specified");var e=!0===(o=o||{}).header?0:1;try{return JSON.parse(base64_url_decode(r.split(".")[e]))}catch(r){throw new InvalidTokenError("Invalid token specified: "+r.message)}},InvalidTokenError_1=InvalidTokenError;lib.InvalidTokenError=InvalidTokenError_1;

var COMMON_FIELDS=["iss","sub","aud","exp","iat","cid","jti","jtt","scp","tnt","jtt"],ACCESS_FIELDS=COMMON_FIELDS,ID_FIELDS=["at_hash","c_hash","nonce"].concat(COMMON_FIELDS);var validatesHeader=function(t){var e=lib(t,{header:!0});if(e.typ!==JWT)throw new Error("the token must be a JWT");if(e.alg!==RS256)throw new Error("the token must be signed in RSA 256");if(!e.hasOwnProperty("kid"))throw new Error("token needs a kid (key identifier) in header");return !0};var validatesFieldsExist=function(t,e){return e.map((function(e){if(!t.hasOwnProperty(e))throw new Error(e+" is missing")})),!0};var validatesTimestamps=function(t){if(!Number.isInteger(t.exp))throw new Error("Expiration Time (exp) claim must be a number present");if(!Number.isInteger(t.iat))throw new Error("Issued At (iat) claim must be a number present");return !0};var validatesAudience=function(t,e){if(e.audience!==t.aud)throw new Error("Audience (aud) ".concat(t.aud," claim does not compliant with ").concat(e.audience," from config"));return !0};var validatesIssuer=function(t,e){var i="".concat(cryptrBaseUrl(e),"/t/").concat(e.tenant_domain);if(i!==t.iss)throw new Error("Issuer (iss) ".concat(t.iss," of this token claim does not compliant ").concat(i));return !0};var validatesExpiration=function(t){var e=new Date(Date.now()),i=new Date(t.exp);if(e.getTime()>i.getTime())throw new Error("Expiration (exp) is invalid, it (".concat(i.getTime(),") must be in the future"));return !0};var validatesJwtBody=function(t,e){validatesTimestamps(t)&&validatesAudience(t,e)&&validatesIssuer(t,e)&&validatesExpiration(t);},Jwt={body:function(t){return lib(t)},validatesAccessToken:function(t,e){var i=Jwt.body(t);return validatesHeader(t),validatesJwtBody(i,e),validatesFieldsExist(i,ACCESS_FIELDS),!0},validatesIdToken:function(t,e){var i=Jwt.body(t);return validatesHeader(t),validatesJwtBody(i,e),validatesFieldsExist(i,ID_FIELDS),!0}};

var sha256_1=function(r,n){function t(r,n){var t=(65535&r)+(65535&n);return (r>>16)+(n>>16)+(t>>16)<<16|65535&t}function e(r,n){return r>>>n|r<<32-n}function a(r,n){return r>>>n}function o(r,n,t){return r&n^~r&t}function u(r,n,t){return r&n^r&t^n&t}function f(r){return e(r,2)^e(r,13)^e(r,22)}function h(r){return e(r,6)^e(r,11)^e(r,25)}function c(r){return e(r,7)^e(r,18)^a(r,3)}var i,C=function(r){for(var n="0123456789abcdef",t="",e=0;e<4*r.length;e++)t+=n.charAt(r[e>>2]>>8*(3-e%4)+4&15)+n.charAt(r[e>>2]>>8*(3-e%4)&15);return t}(function(r,n){var i,C,g,l,d,s,p,v,A,m,S,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),y=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);r[n>>5]|=128<<24-n%32,r[15+(n+64>>9<<4)]=n;for(var b=0;b<r.length;b+=16){i=y[0],C=y[1],g=y[2],l=y[3],d=y[4],s=y[5],p=y[6],v=y[7];for(var w=0;w<64;w++)_[w]=w<16?r[w+b]:t(t(t(e(S=_[w-2],17)^e(S,19)^a(S,10),_[w-7]),c(_[w-15])),_[w-16]),A=t(t(t(t(v,h(d)),o(d,s,p)),x[w]),_[w]),m=t(f(i),u(i,C,g)),v=p,p=s,s=d,d=t(l,A),l=g,g=C,C=i,i=t(A,m);y[0]=t(i,y[0]),y[1]=t(C,y[1]),y[2]=t(g,y[2]),y[3]=t(l,y[3]),y[4]=t(d,y[4]),y[5]=t(s,y[5]),y[6]=t(p,y[6]),y[7]=t(v,y[7]);}return y}(function(r){for(var n=Array(),t=0;t<8*r.length;t+=8)n[t>>5]|=(255&r.charCodeAt(t/8))<<24-t%32;return n}(r=function(r){r=r.replace(/\r\n/g,"\n");for(var n="",t=0;t<r.length;t++){var e=r.charCodeAt(t);e<128?n+=String.fromCharCode(e):e>127&&e<2048?(n+=String.fromCharCode(e>>6|192),n+=String.fromCharCode(63&e|128)):(n+=String.fromCharCode(e>>12|224),n+=String.fromCharCode(e>>6&63|128),n+=String.fromCharCode(63&e|128));}return n}(r)),8*r.length));return "hex"==n?C:"base64"==n?(i=C,btoa(String.fromCharCode.apply(null,i.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))):void 0};

var _nodeResolve_empty = {};

var _nodeResolve_empty$1 = /*#__PURE__*/Object.freeze({
	__proto__: null,
	'default': _nodeResolve_empty
});

var require$$0 = getCjsExportFromNamespace(_nodeResolve_empty$1);

var secureRandom=createCommonjsModule((function(r){!function(e){function o(r,e){if(e=e||{type:"Array"},"undefined"!=typeof process&&"number"==typeof process.pid&&process.versions&&process.versions.node)return function(r,e){var o=require$$0.randomBytes(r);switch(e.type){case"Array":return [].slice.call(o);case"Buffer":return o;case"Uint8Array":for(var n=new Uint8Array(r),t=0;t<r;++t)n[t]=o.readUInt8(t);return n;default:throw new Error(e.type+" is unsupported.")}}(r,e);if(!(window.crypto||window.msCrypto))throw new Error("Your browser does not support window.crypto.");return function(r,e){var o=new Uint8Array(r);switch((window.crypto||window.msCrypto).getRandomValues(o),e.type){case"Array":return [].slice.call(o);case"Buffer":try{new Buffer(1);}catch(r){throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new Buffer(o);case"Uint8Array":return o;default:throw new Error(e.type+" is unsupported.")}}(r,e)}r.exports?r.exports=o:e.secureRandom=o,o.randomArray=function(r){return o(r,{type:"Array"})},o.randomUint8Array=function(r){return o(r,{type:"Uint8Array"})},o.randomBuffer=function(r){return o(r,{type:"Buffer"})};}(commonjsGlobal);}));

var Crypto={random:function(){return btoa(secureRandom(32)).substring(0,128)},sha256:function(r){return sha256_1(r,"base64")||""}};

var codeChallenge=function(e){return Crypto.sha256(e)},Pkce={gen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v4(),o=Crypto.random();return {code_verifier:o,code_challenge:codeChallenge(o),code_challenge_method:SHA256,state:e}}};

var defaults$1=createCommonjsModule((function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.endsInPath=e.hasProtocol=e.isHttps=e.DEFAULT_TESTING_CONFIG=void 0,e.DEFAULT_TESTING_CONFIG={disableHttpsCheck:!1},e.isHttps=new RegExp("^https://"),e.hasProtocol=new RegExp("://"),e.endsInPath=new RegExp("/$");}));unwrapExports(defaults$1);var defaults_1$1=defaults$1.endsInPath;var defaults_2=defaults$1.hasProtocol;var defaults_3=defaults$1.isHttps;var defaults_4=defaults$1.DEFAULT_TESTING_CONFIG;

var functions=createCommonjsModule((function(t,e){var i,o=commonjsGlobal&&commonjsGlobal.__extends||(i=function(t,e){return (i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);})(t,e)},function(t,e){function o(){this.constructor=t;}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o);});Object.defineProperty(e,"__esModule",{value:!0}),e.validAppBaseUrl=e.validRedirectUri=e.validClientSecret=e.validClientId=e.validIssuer=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Error);e.validIssuer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=defaults$1.DEFAULT_TESTING_CONFIG);if(e.disableHttpsCheck){console.warn("Warning: HTTPS check is disabled.This allows for insecure configurations and is NOT recommended for production use.");}if(!t||""==t)throw new r("Your Cryptr URL issuer is missing.");if(!e.disableHttpsCheck&&!t.match(defaults$1.isHttps))throw new r("Your Cryptr URL issuer must start with https.Current value: "+t+". You can copy your domain from the Cryptr Developer ");if(t.match(/{yourCryptrDomain}/))throw new r("Replace {yourCryptrDomain} with your Cryptr domain.")},e.validClientId=function(t){if(void 0===t&&(t=""),!t||""==t)throw new r("Your client ID is missing.");if(t.match(/{client_id}/))throw new r("Replace "+t+" (client_id in cryptr.config.json) with the client ID of your Application.")},e.validClientSecret=function(t){if(void 0===t&&(t=""),!t||""==t)throw new r("Your client secret is missing.");if(t.match(/{clientSecret}/))throw new r("Replace {clientSecret} with the client secret of your Application.")},e.validRedirectUri=function(t){if(void 0===t&&(t=""),!t||""==t)throw new r("Your redirect URI is missing.");if(t.match(/{redirectUri}/))throw new r("Replace {redirectUri} with the redirect URI of your Application.")},e.validAppBaseUrl=function(t){if(void 0===t&&(t=""),!t||""==t)throw new r("Your appBaseUrl is missing.");if(t.match(/{appBaseUrl}/))throw new r("Replace {appBaseUrl} with the base URL of your Application.");if(!t.match(defaults$1.hasProtocol))throw new r("Your appBaseUrl must contain a protocol (e.g. https://). Current value: "+t+".");if(t.match(defaults$1.endsInPath))throw new r("Your appBaseUrl must not end in a '/'. Current value: "+t+".")};}));unwrapExports(functions);var functions_1=functions.validAppBaseUrl;var functions_2=functions.validRedirectUri;var functions_3=functions.validClientSecret;var functions_4=functions.validClientId;var functions_5=functions.validIssuer;

var dist=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validClientId=t.validRedirectUri=t.validIssuer=t.validClientSecret=t.validAppBaseUrl=void 0,Object.defineProperty(t,"validAppBaseUrl",{enumerable:!0,get:function(){return functions.validAppBaseUrl}}),Object.defineProperty(t,"validClientSecret",{enumerable:!0,get:function(){return functions.validClientSecret}}),Object.defineProperty(t,"validIssuer",{enumerable:!0,get:function(){return functions.validIssuer}}),Object.defineProperty(t,"validRedirectUri",{enumerable:!0,get:function(){return functions.validRedirectUri}}),Object.defineProperty(t,"validClientId",{enumerable:!0,get:function(){return functions.validClientId}});}));unwrapExports(dist);var dist_1=dist.validClientId;var dist_2=dist.validRedirectUri;var dist_3=dist.validIssuer;var dist_4=dist.validClientSecret;var dist_5=dist.validAppBaseUrl;

var EventTypes={REFRESH_INVALID_GRANT:"cryptr.refresh.invalid_grant",REFRESH_EXPIRED:"cryptr.refresh.expired"};

function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n);}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty(e,r,t[r]);})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));}));}return e}var newTransaction=function(e,r,t,n){return void 0!==t&&null!=t&&dist_2(t),{pkce:Pkce.gen(),sign_type:e,scope:r,nonce:v4(),locale:n,redirect_uri:t}},newTransactionWithState=function(e,r,t,n,a){return void 0!==n&&null!=n&&dist_2(n),{pkce:Pkce.gen(t),sign_type:e,scope:r,nonce:v4(),locale:a,redirect_uri:n}};var validatesNonce=function(e,r){if(r!==e.nonce)throw new Error("Nonce values have to be the sames");return !0};var signPath=function(e,r){var t=r.locale||e.default_locale||"en";return "/t/".concat(e.tenant_domain,"/").concat(t,"/").concat(r.pkce.state,"/").concat(r.sign_type,"/new")};var transactionKey=function(e){return "".concat(STORAGE_KEY_PREFIX,".transaction.").concat(e)};var setTransactionKey=function(e){return "".concat(STORAGE_KEY_PREFIX,".transaction.").concat(e.pkce.state)};var refreshKey=function(){return "".concat(STORAGE_KEY_PREFIX,".refresh")};var validateAndFormatAuthResp=function(e,r,t,n){var a=!0,o=[],c=Jwt.validatesIdToken(t||"",e);return Jwt.validatesAccessToken(r||"",e)||(a=!1,o=[{field:"idToken",message:"Not retrieve"}]),t&&c||(a=!1,o=c?o:o.concat([{field:"idToken",message:"Cant process request"}]),o=t?o:o.concat([{field:"idToken",message:"Not retrieve"}])),{valid:a,accessToken:r||"",idToken:t||"",refreshToken:n||"",errors:[{}]}},getRefreshParameters=function(e){var r=e.access_token_expiration_date||e.expires_at,t="string"==typeof r?Date.parse(r):new Date(r).getTime(),n=e.refresh_expiration_date||e.refresh_token_expires_at,a="string"==typeof n?Date.parse(n):new Date(n).getTime();try{return {access_token_expiration_date:t,refresh_token:e.refresh_token,refresh_leeway:e.refresh_leeway,refresh_retry:e.refresh_retry,refresh_expiration_date:a}}catch(e){return {}}},parseTokensAndStoreRefresh=function(e,r,t,n){var a=r.data,o=a.access_token,c=a.id_token,i=a.refresh_token;return Jwt.validatesAccessToken(o,e)&&(i&&Storage.createCookie(refreshKey(),_objectSpread({refresh_token:i,rotation_duration:DEFAULT_REFRESH_ROTATION_DURATION,expiration_date:Date.now()+DEFAULT_REFRESH_EXPIRATION},getRefreshParameters(a))),n.withPKCE&&Storage.deleteCookie(transactionKey(t.pkce.state))),_objectSpread(_objectSpread({},validateAndFormatAuthResp(e,o,c,i)),getRefreshParameters(a))},Transaction={key:transactionKey,new:newTransaction,create:function(e,r,t,n){if(void 0!==n&&null!=n&&dist_2(n),t&&!ALLOWED_LOCALES.includes(t))throw new Error("'".concat(t,"' locale not valid, possible values ").concat(ALLOWED_LOCALES));var a=newTransaction(e,r,n,t);return Storage.createCookie(setTransactionKey(a),a),a},createFromState:function(e,r,t,n,a){if(void 0!==a&&null!=a&&dist_2(a),n&&!ALLOWED_LOCALES.includes(n))throw new Error("'".concat(n,"' locale not valid, possible values ").concat(ALLOWED_LOCALES));var o=newTransactionWithState(r,t,e,a,n);return Storage.createCookie(transactionKey(e),o),o},get:function(e){var r=transactionKey(e);return Storage.getCookie(r)},getTokens:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t,n){var a;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={valid:!1,accessToken:"",idToken:"",refreshToken:"",errors:[{}]},e.next=3,Request$1.postAuthorizationCode(r,t,n).then((function(e){validatesNonce(n,e.data.nonce),a=parseTokensAndStoreRefresh(r,e,n,{withPKCE:!0});})).catch((function(e){var t=[{field:"",message:e.message}];if(!r){var n="config is null";captureMessage(n),t.push({field:"transaction",message:n});}a=_objectSpread(_objectSpread({},a),{},{valid:!1,errors:t}),captureException(e);}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),getTokensByRefresh:function(){var e=asyncToGenerator(regenerator.mark((function e(r,t){var n,a;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={valid:!1,accessToken:"",idToken:"",refreshToken:"",errors:[{}]},t){e.next=3;break}return e.abrupt("return",n);case 3:return a=Transaction.create(Sign.Refresh,""),e.next=6,Request$1.refreshTokens(r,a,t).then((function(e){n=parseTokensAndStoreRefresh(r,e,a,{withPKCE:!1});})).catch((function(e){var r=e.response;r&&400===r.status&&"invalid_grant"===r.data.error&&window.dispatchEvent(new Event(EventTypes.REFRESH_INVALID_GRANT)),n=_objectSpread(_objectSpread({},n),{},{valid:!1,errors:e});})).finally((function(){Storage.deleteCookie(transactionKey(a.pkce.state));}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),getRefreshParameters:getRefreshParameters,signUrl:function(e,r){var t=new URL(cryptrBaseUrl(e));return t.pathname=signPath(e,r),t.searchParams.append("scope",r.scope),t.searchParams.append("client_id",e.client_id),t.searchParams.append("redirect_uri",r.redirect_uri||e.default_redirect_uri),t.searchParams.append("code_challenge_method",r.pkce.code_challenge_method),t.searchParams.append("code_challenge",r.pkce.code_challenge),t}};

var InMemory=function(){function e(){classCallCheck(this,e),defineProperty(this,"cache",{}),defineProperty(this,"accessTokenKey","accessToken"),defineProperty(this,"idTokenKey","idToken");}return createClass(e,[{key:"set",value:function(e,t){this.cache.hasOwnProperty(e)?(this.cache[e].value=t,this.cache[e].setAt=new Date):this.cache[e]={value:t,setAt:new Date};}},{key:"get",value:function(e){return void 0!==this.cache[e]?this.cache[e].value:void 0}},{key:"setAccessToken",value:function(e){this.set(this.accessTokenKey,e);}},{key:"getAccessToken",value:function(){return this.get(this.accessTokenKey)}},{key:"setIdToken",value:function(e){this.set(this.idTokenKey,e);}},{key:"getIdToken",value:function(){return this.get(this.idTokenKey)}},{key:"clearTokens",value:function(){this.setAccessToken(""),this.setIdToken("");}}]),e}();

var SpanStatus;!function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss";}(SpanStatus||(SpanStatus={})),function(e){e.fromHttpCode=function(n){if(n<400)return e.Ok;if(n>=400&&n<500)switch(n){case 401:return e.Unauthenticated;case 403:return e.PermissionDenied;case 404:return e.NotFound;case 409:return e.AlreadyExists;case 413:return e.FailedPrecondition;case 429:return e.ResourceExhausted;default:return e.InvalidArgument}if(n>=500&&n<600)switch(n){case 501:return e.Unimplemented;case 503:return e.Unavailable;case 504:return e.DeadlineExceeded;default:return e.InternalError}return e.UnknownError};}(SpanStatus||(SpanStatus={}));

var TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function hasTracingEnabled(r){return "tracesSampleRate"in r||"tracesSampler"in r}function extractTraceparentData(r){var t=r.match(TRACEPARENT_REGEXP);if(t){var e=void 0;return "1"===t[3]?e=!0:"0"===t[3]&&(e=!1),{traceId:t[1],parentSampled:e,parentSpanId:t[2]}}}function getActiveTransaction(r){var t,e;return void 0===r&&(r=getCurrentHub()),null===(e=null===(t=r)||void 0===t?void 0:t.getScope())||void 0===e?void 0:e.getTransaction()}function msToSec(r){return r/1e3}function secToMs(r){return 1e3*r}

function registerErrorInstrumentation(){addInstrumentationHandler({callback:errorCallback,type:"error"}),addInstrumentationHandler({callback:errorCallback,type:"unhandledrejection"});}function errorCallback(){var r=getActiveTransaction();r&&(logger.log("[Tracing] Transaction: "+SpanStatus.InternalError+" -> Global error occured"),r.setStatus(SpanStatus.InternalError));}

var SpanRecorder=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this._maxlen=t;}return t.prototype.add=function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t);},t}();var Span=function(){function t(t){if(this.traceId=uuid4(),this.spanId=uuid4().substring(16),this.startTimestamp=timestampWithMs(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp);}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(s){var a=new t(__assign(__assign({},s),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return a.spanRecorder=this.spanRecorder,a.spanRecorder&&a.spanRecorder.add(a),a.transaction=this.transaction,a},t.prototype.setTag=function(t,s){var a;return this.tags=__assign(__assign({},this.tags),((a={})[t]=s,a)),this},t.prototype.setData=function(t,s){var a;return this.data=__assign(__assign({},this.data),((a={})[t]=s,a)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var s=SpanStatus.fromHttpCode(t);return s!==SpanStatus.UnknownError&&this.setStatus(s),this},t.prototype.isSuccess=function(){return this.status===SpanStatus.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:timestampWithMs();},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.getTraceContext=function(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}();

var Transaction$1=function(t){function e(e,n){var s=t.call(this,e)||this;return s._measurements={},s._hub=getCurrentHub(),isInstanceOf(n,Hub)&&(s._hub=n),s.name=e.name?e.name:"",s._trimEnd=e.trimEnd,s.transaction=s,s}return __extends(e,t),e.prototype.setName=function(t){this.name=t;},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new SpanRecorder(t)),this.spanRecorder.add(this);},e.prototype.setMeasurements=function(t){this._measurements=__assign({},t);},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var s=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==n&&t.endTimestamp})):[];this._trimEnd&&s.length>0&&(this.endTimestamp=s.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var a={contexts:{trace:this.getTraceContext()},spans:s,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction"};return Object.keys(this._measurements).length>0&&(logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),a.measurements=this._measurements),this._hub.captureEvent(a)}logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");}},e}(Span);

var DEFAULT_IDLE_TIMEOUT=1e3;var IdleTransactionSpanRecorder=function(t){function i(i,e,n,a){void 0===n&&(n="");var r=t.call(this,a)||this;return r._pushActivity=i,r._popActivity=e,r.transactionSpanId=n,r}return __extends(i,t),i.prototype.add=function(i){var e=this;i.spanId!==this.transactionSpanId&&(i.finish=function(t){i.endTimestamp="number"==typeof t?t:timestampWithMs(),e._popActivity(i.spanId);},void 0===i.endTimestamp&&this._pushActivity(i.spanId)),t.prototype.add.call(this,i);},i}(SpanRecorder);var IdleTransaction=function(t){function i(i,e,n,a){void 0===n&&(n=DEFAULT_IDLE_TIMEOUT),void 0===a&&(a=!1);var r=t.call(this,i,e)||this;return r._idleHub=e,r._idleTimeout=n,r._onScope=a,r.activities={},r._heartbeatTimer=0,r._heartbeatCounter=0,r._finished=!1,r._beforeFinishCallbacks=[],e&&a&&(clearActiveTransaction(e),logger.log("Setting idle transaction on scope. Span ID: "+r.spanId),e.configureScope((function(t){return t.setSpan(r)}))),r}return __extends(i,t),i.prototype.finish=function(i){var e,n,a=this;if(void 0===i&&(i=timestampWithMs()),this._finished=!0,this.activities={},this.spanRecorder){logger.log("[Tracing] finishing IdleTransaction",new Date(1e3*i).toISOString(),this.op);try{for(var r=__values(this._beforeFinishCallbacks),s=r.next();!s.done;s=r.next()){(0,s.value)(this,i);}}catch(t){e={error:t};}finally{try{s&&!s.done&&(n=r.return)&&n.call(r);}finally{if(e)throw e.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(t){if(t.spanId===a.spanId)return !0;t.endTimestamp||(t.endTimestamp=i,t.setStatus(SpanStatus.Cancelled),logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));var e=t.startTimestamp<i;return e||logger.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),e})),this._onScope&&clearActiveTransaction(this._idleHub),logger.log("[Tracing] flushing IdleTransaction");}else logger.log("[Tracing] No active IdleTransaction");return t.prototype.finish.call(this,i)},i.prototype.registerBeforeFinishCallback=function(t){this._beforeFinishCallbacks.push(t);},i.prototype.initSpanRecorder=function(t){var i=this;if(!this.spanRecorder){this._initTimeout=setTimeout((function(){i._finished||i.finish();}),this._idleTimeout);this.spanRecorder=new IdleTransactionSpanRecorder((function(t){i._finished||i._pushActivity(t);}),(function(t){i._finished||i._popActivity(t);}),this.spanId,t),logger.log("Starting heartbeat"),this._pingHeartbeat();}this.spanRecorder.add(this);},i.prototype._pushActivity=function(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),logger.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,logger.log("[Tracing] new activities count",Object.keys(this.activities).length);},i.prototype._popActivity=function(t){var i=this;if(this.activities[t]&&(logger.log("[Tracing] popActivity "+t),delete this.activities[t],logger.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var e=this._idleTimeout,n=timestampWithMs()+e/1e3;setTimeout((function(){i._finished||i.finish(n);}),e);}},i.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var t=Object.keys(this.activities),i=t.length?t.reduce((function(t,i){return t+i})):"";i===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=i,this._heartbeatCounter>=3?(logger.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(SpanStatus.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat();}},i.prototype._pingHeartbeat=function(){var t=this;logger.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){t._beat();}),5e3);},i}(Transaction$1);function clearActiveTransaction(t){if(t){var i=t.getScope();if(i)i.getTransaction()&&i.setSpan(void 0);}}

function traceHeaders(){var e=this.getScope();if(e){var a=e.getSpan();if(a)return {"sentry-trace":a.toTraceparent()}}return {}}function sample(e,a,t){var n,r,i=e.getClient(),s=i&&i.getOptions()||{};return i&&hasTracingEnabled(s)?void 0!==a.sampled?(a.tags=__assign(__assign({},a.tags),{__sentry_samplingMethod:TransactionSamplingMethod.Explicit}),a):("function"==typeof s.tracesSampler?(r=s.tracesSampler(t),a.tags=__assign(__assign({},a.tags),{__sentry_samplingMethod:TransactionSamplingMethod.Sampler,__sentry_sampleRate:String(Number(r))})):void 0!==t.parentSampled?(r=t.parentSampled,a.tags=__assign(__assign({},a.tags),{__sentry_samplingMethod:TransactionSamplingMethod.Inheritance})):(r=s.tracesSampleRate,a.tags=__assign(__assign({},a.tags),{__sentry_samplingMethod:TransactionSamplingMethod.Rate,__sentry_sampleRate:String(Number(r))})),isValidSampleRate(r)?r?(a.sampled=Math.random()<r,a.sampled?(a.initSpanRecorder(null===(n=s._experiments)||void 0===n?void 0:n.maxSpans),logger.log("[Tracing] starting "+a.op+" transaction - "+a.name),a):(logger.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),a)):(logger.log("[Tracing] Discarding transaction because "+("function"==typeof s.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),a.sampled=!1,a):(logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),a.sampled=!1,a)):(a.sampled=!1,a)}function getDefaultSamplingContext(e){var a={transactionContext:e,parentSampled:e.parentSampled};if(isNodeEnv()){var t=getActiveDomain();if(t){var n=dynamicRequire(module,"http").IncomingMessage,r=t.members.find((function(e){return isInstanceOf(e,n)}));r&&(a.request=extractNodeRequestData(r));}}else {var i=getGlobalObject();"location"in i&&(a.location=__assign({},i.location));}return a}function isValidSampleRate(e){return isNaN(e)||"number"!=typeof e&&"boolean"!=typeof e?(logger.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+"."),!1):!(e<0||e>1)||(logger.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+e+"."),!1)}function _startTransaction(e,a){return sample(this,new Transaction$1(e,this),__assign(__assign({},getDefaultSamplingContext(e)),a))}function startIdleTransaction(e,a,t,n){return sample(e,new IdleTransaction(a,e,t,n),getDefaultSamplingContext(a))}function _addTracingExtensions(){var e=getMainCarrier();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=_startTransaction),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=traceHeaders));}function addExtensionMethods(){_addTracingExtensions(),registerErrorInstrumentation();}

var global$5=getGlobalObject();function registerBackgroundTabDetection(){global$5&&global$5.document?global$5.document.addEventListener("visibilitychange",(function(){var t=getActiveTransaction();global$5.document.hidden&&t&&(logger.log("[Tracing] Transaction: "+SpanStatus.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(SpanStatus.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish());})):logger.warn("[Tracing] Could not set up background tab detection due to lack of global document");}

var bindReporter=function(i,e,n,t){var a;return function(){n&&e.isFinal&&n.disconnect(),e.value>=0&&(t||e.isFinal||"hidden"===document.visibilityState)&&(e.delta=e.value-(a||0),(e.delta||e.isFinal||void 0===a)&&(i(e),a=e.value));}};

var generateUniqueID=function(){return Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)};

var initMetric=function(e,i){return void 0===i&&(i=-1),{name:e,value:i,delta:0,entries:[],id:generateUniqueID(),isFinal:!1}};

var observe=function(e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){return e.getEntries().map(r)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}};

var isUnloading=!1,listenersAdded=!1,onPageHide=function(e){isUnloading=!e.persisted;},addListeners=function(){addEventListener("pagehide",onPageHide),addEventListener("beforeunload",(function(){}));};var onHidden=function(e,i){void 0===i&&(i=!1),listenersAdded||(addListeners(),listenersAdded=!0),addEventListener("visibilitychange",(function(i){var n=i.timeStamp;"hidden"===document.visibilityState&&e({timeStamp:n,isUnloading:isUnloading});}),{capture:!0,once:i});};

var getCLS=function(i,e){void 0===e&&(e=!1);var r,o=initMetric("CLS",0),n=function(i){i.hadRecentInput||(o.value+=i.value,o.entries.push(i),r());},t=observe("layout-shift",n);t&&(r=bindReporter(i,o,t,e),onHidden((function(i){var e=i.isUnloading;t.takeRecords().map(n),e&&(o.isFinal=!0),r();})));};

var firstHiddenTime;var getFirstHidden=function(){return void 0===firstHiddenTime&&(firstHiddenTime="hidden"===document.visibilityState?0:1/0,onHidden((function(i){var e=i.timeStamp;return firstHiddenTime=e}),!0)),{get timeStamp(){return firstHiddenTime}}};

var getFID=function(t){var i=initMetric("FID"),e=getFirstHidden(),r=function(t){t.startTime<e.timeStamp&&(i.value=t.processingStart-t.startTime,i.entries.push(t),i.isFinal=!0,o());},n=observe("first-input",r),o=bindReporter(t,i,n);n?onHidden((function(){n.takeRecords().map(r),n.disconnect();}),!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((function(t,r){r.timeStamp<e.timeStamp&&(i.value=t,i.isFinal=!0,i.entries=[{entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+t}],o());}));};

var inputPromise;var whenInput=function(){return inputPromise||(inputPromise=new Promise((function(n){return ["scroll","keydown","pointerdown"].map((function(e){addEventListener(e,n,{once:!0,passive:!0,capture:!0});}))}))),inputPromise};

var getLCP=function(i,t){void 0===t&&(t=!1);var e,r=initMetric("LCP"),n=getFirstHidden(),o=function(i){var t=i.startTime;t<n.timeStamp?(r.value=t,r.entries.push(i)):r.isFinal=!0,e();},d=observe("largest-contentful-paint",o);if(d){e=bindReporter(i,r,d,t);var p=function(){r.isFinal||(d.takeRecords().map(o),r.isFinal=!0,e());};whenInput().then(p),onHidden(p,!0);}};

var global$6=getGlobalObject(),afterLoad=function(t){"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t);},getNavigationEntryFromPerformanceTiming=function(){var t=global$6.performance.timing,e={entryType:"navigation",startTime:0};for(var a in t)"navigationStart"!==a&&"toJSON"!==a&&(e[a]=Math.max(t[a]-t.navigationStart,0));return e};var getTTFB=function(t){var e=initMetric("TTFB");afterLoad((function(){try{var a=global$6.performance.getEntriesByType("navigation")[0]||getNavigationEntryFromPerformanceTiming();e.value=e.delta=a.responseStart,e.entries=[a],t(e);}catch(t){}}));};

var global$7=getGlobalObject(),MetricsInstrumentation=function(){function e(){this._measurements={},this._performanceCursor=0,global$7&&global$7.performance&&(global$7.performance.mark&&global$7.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID(),this._trackTTFB());}return e.prototype.addPerformanceEntries=function(e){var t=this;if(global$7&&global$7.performance&&global$7.performance.getEntries&&browserPerformanceTimeOrigin){logger.log("[Tracing] Adding & adjusting spans using Performance API");var r,a,i,n=msToSec(browserPerformanceTimeOrigin);if(global$7.document)for(var s=0;s<document.scripts.length;s++)if("true"===document.scripts[s].dataset.entry){r=document.scripts[s].src;break}if(global$7.performance.getEntries().slice(this._performanceCursor).forEach((function(s){var o=msToSec(s.startTime),m=msToSec(s.duration);if(!("navigation"===e.op&&n+o<e.startTimestamp))switch(s.entryType){case"navigation":addNavigationSpans(e,s,n);break;case"mark":case"paint":case"measure":var c=addMeasureSpans(e,s,o,m,n);void 0===i&&"sentry-tracing-init"===s.name&&(i=c);var d=getFirstHidden(),u=s.startTime<d.timeStamp;"first-paint"===s.name&&u&&(logger.log("[Measurements] Adding FP"),t._measurements.fp={value:s.startTime},t._measurements["mark.fp"]={value:c}),"first-contentful-paint"===s.name&&u&&(logger.log("[Measurements] Adding FCP"),t._measurements.fcp={value:s.startTime},t._measurements["mark.fcp"]={value:c});break;case"resource":var p=s.name.replace(window.location.origin,""),g=addResourceSpans(e,s,p,o,m,n);void 0===a&&(r||"").indexOf(p)>-1&&(a=g);}})),void 0!==a&&void 0!==i&&_startChild(e,{description:"evaluation",endTimestamp:i,op:"script",startTimestamp:a}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(e),"pageload"===e.op){var o=msToSec(browserPerformanceTimeOrigin);["fcp","fp","lcp","ttfb"].forEach((function(r){if(t._measurements[r]&&!(o>=e.startTimestamp)){var a=t._measurements[r].value,i=o+msToSec(a),n=Math.abs(1e3*(i-e.startTimestamp)),s=n-a;logger.log("[Measurements] Normalized "+r+" from "+a+" to "+n+" ("+s+")"),t._measurements[r].value=n;}})),this._measurements["mark.fid"]&&this._measurements.fid&&_startChild(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+msToSec(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),e.setMeasurements(this._measurements);}}},e.prototype._trackCLS=function(){var e=this;getCLS((function(t){t.entries.pop()&&(logger.log("[Measurements] Adding CLS"),e._measurements.cls={value:t.value});}));},e.prototype._trackNavigator=function(e){var t=global$7.navigator;if(t){var r=t.connection;r&&(r.effectiveType&&e.setTag("effectiveConnectionType",r.effectiveType),r.type&&e.setTag("connectionType",r.type),isMeasurementValue(r.rtt)&&(this._measurements["connection.rtt"]={value:r.rtt}),isMeasurementValue(r.downlink)&&(this._measurements["connection.downlink"]={value:r.downlink})),isMeasurementValue(t.deviceMemory)&&e.setTag("deviceMemory",String(t.deviceMemory)),isMeasurementValue(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency));}},e.prototype._trackLCP=function(){var e=this;getLCP((function(t){var r=t.entries.pop();if(r){var a=msToSec(performance.timeOrigin),i=msToSec(r.startTime);logger.log("[Measurements] Adding LCP"),e._measurements.lcp={value:t.value},e._measurements["mark.lcp"]={value:a+i};}}));},e.prototype._trackFID=function(){var e=this;getFID((function(t){var r=t.entries.pop();if(r){var a=msToSec(performance.timeOrigin),i=msToSec(r.startTime);logger.log("[Measurements] Adding FID"),e._measurements.fid={value:t.value},e._measurements["mark.fid"]={value:a+i};}}));},e.prototype._trackTTFB=function(){var e=this;getTTFB((function(t){var r,a=t.entries.pop();if(a){logger.log("[Measurements] Adding TTFB"),e._measurements.ttfb={value:t.value};var i=t.value-(r=t.entries[0],null!=r?r:a).requestStart;e._measurements["ttfb.requestTime"]={value:i};}}));},e}();function addNavigationSpans(e,t,r){addPerformanceNavigationTiming(e,t,"unloadEvent",r),addPerformanceNavigationTiming(e,t,"redirect",r),addPerformanceNavigationTiming(e,t,"domContentLoadedEvent",r),addPerformanceNavigationTiming(e,t,"loadEvent",r),addPerformanceNavigationTiming(e,t,"connect",r),addPerformanceNavigationTiming(e,t,"secureConnection",r,"connectEnd"),addPerformanceNavigationTiming(e,t,"fetch",r,"domainLookupStart"),addPerformanceNavigationTiming(e,t,"domainLookup",r),addRequest(e,t,r);}function addMeasureSpans(e,t,r,a,i){var n=i+r,s=n+a;return _startChild(e,{description:t.name,endTimestamp:s,op:t.entryType,startTimestamp:n}),n}function addResourceSpans(e,t,r,a,i,n){if("xmlhttprequest"!==t.initiatorType&&"fetch"!==t.initiatorType){var s={};"transferSize"in t&&(s["Transfer Size"]=t.transferSize),"encodedBodySize"in t&&(s["Encoded Body Size"]=t.encodedBodySize),"decodedBodySize"in t&&(s["Decoded Body Size"]=t.decodedBodySize);var o=n+a,m=o+i;return _startChild(e,{description:r,endTimestamp:m,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:o,data:s}),m}}function addPerformanceNavigationTiming(e,t,r,a,i){var n=i?t[i]:t[r+"End"],s=t[r+"Start"];s&&n&&_startChild(e,{op:"browser",description:r,startTimestamp:a+msToSec(s),endTimestamp:a+msToSec(n)});}function addRequest(e,t,r){_startChild(e,{op:"browser",description:"request",startTimestamp:r+msToSec(t.requestStart),endTimestamp:r+msToSec(t.responseEnd)}),_startChild(e,{op:"browser",description:"response",startTimestamp:r+msToSec(t.responseStart),endTimestamp:r+msToSec(t.responseEnd)});}function _startChild(e,t){var r=t.startTimestamp,a=__rest(t,["startTimestamp"]);return r&&e.startTimestamp>r&&(e.startTimestamp=r),e.startChild(__assign({startTimestamp:r},a))}function isMeasurementValue(e){return "number"==typeof e&&isFinite(e)}

var DEFAULT_TRACING_ORIGINS=["localhost",/^\//];var defaultRequestInstrumentationOptions={traceFetch:!0,traceXHR:!0,tracingOrigins:DEFAULT_TRACING_ORIGINS};function registerRequestInstrumentation(t){var e=__assign(__assign({},defaultRequestInstrumentationOptions),t),a=e.traceFetch,r=e.traceXHR,n=e.tracingOrigins,s=e.shouldCreateSpanForRequest,_={},i=function(t){if(_[t])return _[t];var e=n;return _[t]=e.some((function(e){return isMatchingPattern(t,e)}))&&!isMatchingPattern(t,"sentry_key"),_[t]},c=i;"function"==typeof s&&(c=function(t){return i(t)&&s(t)});var o={};a&&addInstrumentationHandler({callback:function(t){fetchCallback(t,c,o);},type:"fetch"}),r&&addInstrumentationHandler({callback:function(t){xhrCallback(t,c,o);},type:"xhr"});}function fetchCallback(t,e,a){var r,n=null===(r=getCurrentHub().getClient())||void 0===r?void 0:r.getOptions();if(n&&hasTracingEnabled(n)&&t.fetchData&&e(t.fetchData.url))if(t.endTimestamp&&t.fetchData.__span){if(i=a[t.fetchData.__span]){var s=t.response;s&&i.setHttpStatus(s.status),i.finish(),delete a[t.fetchData.__span];}}else {var _=getActiveTransaction();if(_){var i=_.startChild({data:__assign(__assign({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http"});t.fetchData.__span=i.spanId,a[i.spanId]=i;var c=t.args[0]=t.args[0],o=t.args[1]=t.args[1]||{},h=o.headers;isInstanceOf(c,Request)&&(h=c.headers),h?"function"==typeof h.append?h.append("sentry-trace",i.toTraceparent()):h=Array.isArray(h)?__spread(h,[["sentry-trace",i.toTraceparent()]]):__assign(__assign({},h),{"sentry-trace":i.toTraceparent()}):h={"sentry-trace":i.toTraceparent()},o.headers=h;}}}function xhrCallback(t,e,a){var r,n=null===(r=getCurrentHub().getClient())||void 0===r?void 0:r.getOptions();if(n&&hasTracingEnabled(n)&&t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)&&!t.xhr.__sentry_own_request__){var s=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){(i=a[t.xhr.__sentry_xhr_span_id__])&&(i.setHttpStatus(s.status_code),i.finish(),delete a[t.xhr.__sentry_xhr_span_id__]);}else {var _=getActiveTransaction();if(_){var i=_.startChild({data:__assign(__assign({},s.data),{type:"xhr",method:s.method,url:s.url}),description:s.method+" "+s.url,op:"http"});if(t.xhr.__sentry_xhr_span_id__=i.spanId,a[t.xhr.__sentry_xhr_span_id__]=i,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",i.toTraceparent());}catch(t){}}}}}

var global$8=getGlobalObject();function defaultRoutingInstrumentation(o,n,a){if(void 0===n&&(n=!0),void 0===a&&(a=!0),global$8&&global$8.location){var t,i=global$8.location.href;n&&(t=o({name:global$8.location.pathname,op:"pageload"})),a&&addInstrumentationHandler({callback:function(n){var a=n.to,l=n.from;void 0===l&&i&&-1!==i.indexOf(a)?i=void 0:l!==a&&(i=void 0,t&&(logger.log("[Tracing] Finishing current transaction with op: "+t.op),t.finish()),t=o({name:global$8.location.pathname,op:"navigation"}));},type:"history"});}else logger.warn("Could not initialize routing instrumentation due to invalid location");}

var DEFAULT_MAX_TRANSACTION_DURATION_SECONDS=600;var DEFAULT_BROWSER_TRACING_OPTIONS=__assign({idleTimeout:DEFAULT_IDLE_TIMEOUT,markBackgroundTransactions:!0,maxTransactionDuration:DEFAULT_MAX_TRANSACTION_DURATION_SECONDS,routingInstrumentation:defaultRoutingInstrumentation,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},defaultRequestInstrumentationOptions),BrowserTracing=function(){function t(n){this.name=t.id,this._metrics=new MetricsInstrumentation,this._emitOptionsWarning=!1;var r=defaultRequestInstrumentationOptions.tracingOrigins;n&&n.tracingOrigins&&Array.isArray(n.tracingOrigins)&&0!==n.tracingOrigins.length?r=n.tracingOrigins:this._emitOptionsWarning=!0,this.options=__assign(__assign(__assign({},DEFAULT_BROWSER_TRACING_OPTIONS),n),{tracingOrigins:r});}return t.prototype.setupOnce=function(t,n){var r=this;this._getCurrentHub=n,this._emitOptionsWarning&&(logger.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),logger.warn("[Tracing] We added a reasonable default for you: "+defaultRequestInstrumentationOptions.tracingOrigins));var a=this.options,e=a.routingInstrumentation,i=a.startTransactionOnLocationChange,o=a.startTransactionOnPageLoad,s=a.markBackgroundTransactions,u=a.traceFetch,c=a.traceXHR,g=a.tracingOrigins,m=a.shouldCreateSpanForRequest;e((function(t){return r._createRouteTransaction(t)}),o,i),s&&registerBackgroundTabDetection(),registerRequestInstrumentation({traceFetch:u,traceXHR:c,tracingOrigins:g,shouldCreateSpanForRequest:m});},t.prototype._createRouteTransaction=function(t){var n=this;if(this._getCurrentHub){var r=this.options,a=r.beforeNavigate,e=r.idleTimeout,i=r.maxTransactionDuration,o="pageload"===t.op?getHeaderContext():void 0,s=__assign(__assign(__assign({},t),o),{trimEnd:!0}),u="function"==typeof a?a(s):s,c=void 0===u?__assign(__assign({},s),{sampled:!1}):u;!1===c.sampled&&logger.log("[Tracing] Will not send "+c.op+" transaction because of beforeNavigate.");var g=this._getCurrentHub(),m=startIdleTransaction(g,c,e,!0);return logger.log("[Tracing] Starting "+c.op+" transaction on scope"),m.registerBeforeFinishCallback((function(t,r){n._metrics.addPerformanceEntries(t),adjustTransactionDuration(secToMs(i),t,r);})),m}logger.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.");},t.id="BrowserTracing",t}();function getHeaderContext(){var t=getMetaContent("sentry-trace");if(t)return extractTraceparentData(t)}function getMetaContent(t){var n=document.querySelector("meta[name="+t+"]");return n?n.getAttribute("content"):null}function adjustTransactionDuration(t,n,r){var a=r-n.startTimestamp;r&&(a>t||a<0)&&(n.setStatus(SpanStatus.DeadlineExceeded),n.setTag("maxTransactionDurationExceeded","true"));}

var Express=function(){function r(t){void 0===t&&(t={}),this.name=r.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use");}return r.prototype.setupOnce=function(){this._router?instrumentMiddlewares(this._router,this._methods):logger.error("ExpressIntegration is missing an Express instance");},r.id="Express",r}();function wrap$1(r,t){var n=r.length;switch(n){case 2:return function(n,e){var i=e.__sentry_transaction;if(i){var a=i.startChild({description:r.name,op:"middleware."+t});e.once("finish",(function(){a.finish();}));}return r.call(this,n,e)};case 3:return function(n,e,i){var a,s=null===(a=e.__sentry_transaction)||void 0===a?void 0:a.startChild({description:r.name,op:"middleware."+t});r.call(this,n,e,(function(){for(var r,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(r=s)||void 0===r||r.finish(),i.call.apply(i,__spread([this],t));}));};case 4:return function(n,e,i,a){var s,o=null===(s=i.__sentry_transaction)||void 0===s?void 0:s.startChild({description:r.name,op:"middleware."+t});r.call(this,n,e,i,(function(){for(var r,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(r=o)||void 0===r||r.finish(),a.call.apply(a,__spread([this],t));}));};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function wrapMiddlewareArgs(r,t){return r.map((function(r){return "function"==typeof r?wrap$1(r,t):Array.isArray(r)?r.map((function(r){return "function"==typeof r?wrap$1(r,t):r})):r}))}function patchMiddleware(r,t){var n=r[t];return r[t]=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return n.call.apply(n,__spread([this],wrapMiddlewareArgs(r,t)))},r}function instrumentMiddlewares(r,t){void 0===t&&(t=[]),t.forEach((function(t){return patchMiddleware(r,t)}));}

var Postgres=function(){function t(){this.name=t.id;}return t.prototype.setupOnce=function(t,n){var i;try{i=dynamicRequire(module,"pg").Client;}catch(t){return void logger.error("Postgres Integration was unable to require `pg` package.")}fill(i.prototype,"query",(function(t){return function(i,o,r){var e,u,l=null===(u=null===(e=n().getScope())||void 0===e?void 0:e.getSpan())||void 0===u?void 0:u.startChild({description:"string"==typeof i?i:i.text,op:"db"});return "function"==typeof r?t.call(this,i,o,(function(t,n){var i;null===(i=l)||void 0===i||i.finish(),r(t,n);})):"function"==typeof o?t.call(this,i,(function(t,n){var i;null===(i=l)||void 0===i||i.finish(),o(t,n);})):t.call(this,i,o).then((function(t){var n;return null===(n=l)||void 0===n||n.finish(),t}))}}));},t.id="Postgres",t}();

var Mysql=function(){function i(){this.name=i.id;}return i.prototype.setupOnce=function(i,n){var t;try{t=dynamicRequire(module,"mysql/lib/Connection.js");}catch(i){return void logger.error("Mysql Integration was unable to require `mysql` package.")}fill(t.prototype,"query",(function(i){return function(t,o,r){var e,l,u=null===(l=null===(e=n().getScope())||void 0===e?void 0:e.getSpan())||void 0===l?void 0:l.startChild({description:"string"==typeof t?t:t.sql,op:"db"});return "function"==typeof r?i.call(this,t,o,(function(i,n,t){var o;null===(o=u)||void 0===o||o.finish(),r(i,n,t);})):"function"==typeof o?i.call(this,t,(function(i,n,t){var r;null===(r=u)||void 0===r||r.finish(),o(i,n,t);})):i.call(this,t,o,r)}}));},i.id="Mysql",i}();

var OPERATIONS=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],OPERATION_SIGNATURES={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},Mongo=function(){function e(n){void 0===n&&(n={}),this.name=e.id,this._operations=Array.isArray(n.operations)?n.operations:OPERATIONS,this._describeOperations=!("describeOperations"in n)||n.describeOperations;}return e.prototype.setupOnce=function(e,n){var t;try{t=dynamicRequire(module,"mongodb").Collection;}catch(e){return void logger.error("Mongo Integration was unable to require `mongodb` package.")}this._instrumentOperations(t,this._operations,n);},e.prototype._instrumentOperations=function(e,n,t){var i=this;n.forEach((function(n){return i._patchOperation(e,n,t)}));},e.prototype._patchOperation=function(e,n,t){if(n in e.prototype){var i=this._getSpanContextFromOperationArguments.bind(this);fill(e.prototype,n,(function(e){return function(){for(var r,o,a,d=[],s=0;s<arguments.length;s++)d[s]=arguments[s];var p=d[d.length-1],c=t().getScope(),l=null===(r=c)||void 0===r?void 0:r.getSpan();if("function"!=typeof p||"mapReduce"===n&&2===d.length){var u=null===(o=l)||void 0===o?void 0:o.startChild(i(this,n,d));return e.call.apply(e,__spread([this],d)).then((function(e){var n;return null===(n=u)||void 0===n||n.finish(),e}))}var f=null===(a=l)||void 0===a?void 0:a.startChild(i(this,n,d.slice(0,-1)));return e.call.apply(e,__spread([this],d.slice(0,-1),[function(e,n){var t;null===(t=f)||void 0===t||t.finish(),p(e,n);}]))}}));}},e.prototype._getSpanContextFromOperationArguments=function(e,n,t){var i={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},r={op:"db",description:n,data:i},o=OPERATION_SIGNATURES[n],a=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!o||!a)return r;try{if("mapReduce"===n){var d=__read(t,2),s=d[0],p=d[1];i[o[0]]="string"==typeof s?s:s.name||"<anonymous>",i[o[1]]="string"==typeof p?p:p.name||"<anonymous>";}else for(var c=0;c<o.length;c++)i[o[c]]=JSON.stringify(t[c]);}catch(e){}return r},e.id="Mongo",e}();



var TracingIntegrations = /*#__PURE__*/Object.freeze({
	__proto__: null,
	Express: Express,
	Postgres: Postgres,
	Mysql: Mysql,
	Mongo: Mongo
});

var Integrations=__assign(__assign({},TracingIntegrations),{BrowserTracing:BrowserTracing});addExtensionMethods();

function funcToSource(fn, sourcemapArg) {
    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
    var source = fn.toString();
    var lines = source.split('\n');
    lines.pop();
    lines.shift();
    var blankPrefixLength = lines[0].search(/\S/);
    var regex = /(['"])__worker_loader_strict__(['"])/g;
    for (var i = 0, n = lines.length; i < n; ++i) {
        lines[i] = lines[i].substring(blankPrefixLength).replace(regex, '$1use strict$2') + '\n';
    }
    if (sourcemap) {
        lines.push('\/\/# sourceMappingURL=' + sourcemap + '\n');
    }
    return lines;
}

function createURL(fn, sourcemapArg) {
    var lines = funcToSource(fn, sourcemapArg);
    var blob = new Blob(lines, { type: 'application/javascript' });
    return URL.createObjectURL(blob);
}

function createInlineWorkerFactory(fn, sourcemapArg) {
    var url;
    return function WorkerFactory(options) {
        url = url || createURL(fn, sourcemapArg);
        return new Worker(url, options);
    };
}

var WorkerFactory = createInlineWorkerFactory(/* rollup-plugin-web-worker-loader */function () {
(function () {
  '__worker_loader_strict__';

  self.addEventListener("install",(function(e){console.log("listener install");})),self.addEventListener("activate",(function(e){console.log("listener activate");})),self.addEventListener("message",(function(e){e.data.refreshTokenParameters;setTimeout((function(){self.postMessage("rotate");}),1e4);}));

}());
}, 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW4ud29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy90b2tlbi53b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IEluTWVtb3J5IGZyb20gJy4vbWVtb3J5J1xuXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbiAoX2V2ZW50KSB7XG4gIGNvbnNvbGUubG9nKCdsaXN0ZW5lciBpbnN0YWxsJylcbiAgLy8gUGVyZm9ybSBzb21lIHRhc2tcbn0pXG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBmdW5jdGlvbiAoX2V2ZW50KSB7XG4gIGNvbnNvbGUubG9nKCdsaXN0ZW5lciBhY3RpdmF0ZScpXG4gIC8vIFBlcmZvcm0gc29tZSB0YXNrXG59KVxuXG4vLyBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbi8vICAgbGV0IGRhdGEgPSBldmVudC5kYXRhXG4vLyAgIGxldCB7IHJvdGF0aW9uX2R1cmF0aW9uLCBleHBpcmF0aW9uX2RhdGUgfSA9IGRhdGFcbi8vICAgY29uc29sZS5sb2coJ3RyeVRvUmVmcmVzaERhdGVTdGFydCA6JylcblxuLy8gICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgPD0gZXhwaXJhdGlvbl9kYXRlKSB7XG4vLyAgICAgcmVjdXJyaW5nUmVmcmVzaFRva2VuKHJvdGF0aW9uX2R1cmF0aW9uKVxuLy8gICB9IGVsc2Uge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoJ3JlZnJlc2ggaXMgbm8gbW9yZSB2YWxpZCcpXG4vLyAgIH1cbi8vIH0pXG5cbi8vIGZ1bmN0aW9uIHJlY3VycmluZ1JlZnJlc2hUb2tlbihyb3RhdGlvbl9kdXJhdGlvbikge1xuLy8gICBzZXRUaW1lb3V0KCgpID0+IHtcbi8vICAgICBzZWxmLnBvc3RNZXNzYWdlKCdyb3RhdGUnKVxuLy8gICB9LCByb3RhdGlvbl9kdXJhdGlvbilcbi8vIH1cblxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gIGxldCBkYXRhID0gZXZlbnQuZGF0YVxuICBsZXQgeyByZWZyZXNoVG9rZW5QYXJhbWV0ZXJzIH0gPSBkYXRhXG5cbiAgY29uc3QgV0FJVF9TRUNPTkRTID0gMTBcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzZWxmLnBvc3RNZXNzYWdlKCdyb3RhdGUnKVxuICB9LCBXQUlUX1NFQ09ORFMgKiAxMDAwKVxufSlcblxuLy8gQHRoaWIgYnJhaW5zdG9ybWluZ1xuLy8gZnVuY3Rpb24gd2FpdChyZWZyZXNoVG9rZW5QYXJhbWV0ZXJzKSB7XG4vLyAgIGxldCB0cnlUb1JlZnJlc2hEYXRlU3RhcnQgPSBuZXcgRGF0ZShyZWZyZXNoVG9rZW5QYXJhbWV0ZXJzLmFjY2Vzc190b2tlbl9leHBpcmF0aW9uX2RhdGUpXG5cbi8vICAgY29uc3QgbGVld2F5ID0gcmVmcmVzaF9sZWV3YXkgfHwgREVGQVVMVF9MRUVXQVlfSU5fU0VDT05EU1xuLy8gICBjb25zdCByZXRyeSA9IHJlZnJlc2hfcmV0cnkgfHwgREVGQVVMVF9SRUZSRVNIX1JFVFJZXG5cbi8vICAgbGV0IG5vdyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLyAxMDAwO1xuXG4vLyAgIC8vIHRyeVRvUmVmcmVzaERhdGVTdGFydCB3aXRoXG4vLyAgIGNvbnN0IGRlYWRsaW5lSW5TZWNvbmRzID0gdHJ5VG9SZWZyZXNoRGF0ZVN0YXJ0LnNldFNlY29uZHModHJ5VG9SZWZyZXNoRGF0ZVN0YXJ0LmdldFNlY29uZHMoKSAtIGxlZXdheSAqIHJldHJ5KS5nZXRUaW1lKCkgLyAxMDAwXG5cbi8vICAgY29uc3Qgd2FpdFRyaWdnZXJJblNlY29uZHMgPSBkZWFkbGluZUluU2Vjb25kcyAtIG5vd1xuXG4vLyAgIHJldHVybiB3YWl0VHJpZ2dlckluU2Vjb25kc1xuLy8gfVxuIl0sIm5hbWVzIjpbInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiX2V2ZW50IiwiY29uc29sZSIsImxvZyIsImV2ZW50IiwiZGF0YSIsInJlZnJlc2hUb2tlblBhcmFtZXRlcnMiLCJzZXRUaW1lb3V0IiwicG9zdE1lc3NhZ2UiLCJXQUlUX1NFQ09ORFMiXSwibWFwcGluZ3MiOiI7OztFQUVBQSxLQUFLQyxpQkFBaUIsV0FBVyxTQUFVQyxHQUN6Q0MsUUFBUUMsSUFBSSx3QkFJZEosS0FBS0MsaUJBQWlCLFlBQVksU0FBVUMsR0FDMUNDLFFBQVFDLElBQUkseUJBc0JkSixLQUFLQyxpQkFBaUIsV0FBVyxTQUFDSSxHQUNyQkEsRUFBTUMsS0FDWEMsdUJBSU5DLFlBQVcsV0FDVFIsS0FBS1MsWUFBWSxhQUNoQkM7Ozs7In0=');
/* eslint-enable */

var locationSearch=function(){return console.log("locationSearch"),console.log(window),null!=window&&void 0!==window.location?window.location.search:""},parseRedirectParams=function(){var e=new URLSearchParams(locationSearch());if(e.get("state")&&e.get("authorization_id")&&e.get("code"))return {state:e.get("state")||"",authorization:{id:e.get("authorization_id")||"",code:e.get("code")||""}};throw new Error("Can not parse authorization params")},CODE_PARAMS=/[?&]code=[^&]+/,STATE_PARAMS=/[?&]state=[^&]+/,AUTH_PARAMS=/[?&]authorization_id=[^&]+/,Client=function(){function e(t){var r=this;if(classCallCheck(this,e),defineProperty(this,"config",void 0),defineProperty(this,"memory",new InMemory),defineProperty(this,"worker",void 0),this.configureSentry(t),dist_5(cryptrBaseUrl(t)),dist_1(t.client_id),dist_2(t.default_redirect_uri),t.default_locale&&!ALLOWED_LOCALES.includes(t.default_locale))throw new Error("'".concat(t.default_locale,"' locale not valid, possible values ").concat(ALLOWED_LOCALES));this.config=t;try{var n;if("serviceWorker"in navigator)this.worker=new WorkerFactory,null===(n=this.worker)||void 0===n||n.addEventListener("message",(function(e){"rotate"==e.data&&r.handleRefreshTokens();}));}catch(e){console.log("worker error"),console.log(e);}}var t,r,n,i,o,a,s,c,u,l,h,f,d,g;return createClass(e,[{key:"configureSentry",value:function(e){(void 0===e.telemetry||e.telemetry)&&(init({dsn:"https://4fa5d7f40b554570b64af9c4326b0efb@o468922.ingest.sentry.io/5497495",integrations:[new Integrations.BrowserTracing],tracesSampleRate:1}),setContext("app",{tenant:e.tenant_domain,client_id:e.client_id,audience:e.audience}));}},{key:"getCurrentAccessToken",value:function(){return this.memory.getAccessToken()}},{key:"getCurrentIdToken",value:function(){return this.memory.getIdToken()}},{key:"currentAccessTokenPresent",value:function(){var e=this.getCurrentAccessToken();return void 0!==e&&e.length>0}},{key:"isAuthenticated",value:(g=asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.currentAccessTokenPresent());case 1:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"finalScope",value:function(e){if(!e||e===DEFAULT_SCOPE)return DEFAULT_SCOPE;var t=e.split(" "),r=DEFAULT_SCOPE.split(" ");return toConsumableArray(new Set([].concat(toConsumableArray(r),toConsumableArray(t)))).join(" ")}},{key:"signWithoutRedirect",value:(d=asyncToGenerator(regenerator.mark((function e(t){var r,n,i,o=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:DEFAULT_SCOPE,n=o.length>2?o[2]:void 0,(i=o.length>3&&void 0!==o[3]?o[3]:this.config.default_redirect_uri)!==this.config.default_redirect_uri&&dist_2(i),e.next=6,Transaction.create(t,this.finalScope(r),n,i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"signInWithoutRedirect",value:(f=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithoutRedirect(Sign.In,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"signUpWithoutRedirect",value:(h=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithoutRedirect(Sign.Up,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"inviteWithoutRedirect",value:(l=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithoutRedirect(Sign.Invite,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"signWithRedirect",value:(u=asyncToGenerator(regenerator.mark((function e(t){var r,n,i,o,a,s=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:DEFAULT_SCOPE,n=s.length>2?s[2]:void 0,(i=s.length>3&&void 0!==s[3]?s[3]:this.config.default_redirect_uri)!==this.config.default_redirect_uri&&dist_2(i),e.next=6,Transaction.create(t,this.finalScope(r),n,i);case 6:return o=e.sent,e.next=9,Transaction.signUrl(this.config,o);case 9:a=e.sent,window.location.assign(a.href);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"signInWithRedirect",value:(c=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithRedirect(Sign.In,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"signUpWithRedirect",value:(s=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithRedirect(Sign.Up,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"inviteWithRedirect",value:(a=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:DEFAULT_SCOPE,r=i.length>1&&void 0!==i[1]?i[1]:this.config.default_redirect_uri,n=i.length>2?i[2]:void 0,this.signWithRedirect(Sign.Invite,t,n,r);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleInvitationState",value:(o=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i,o,a=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:DEFAULT_SCOPE,r=new URLSearchParams(locationSearch()),n=r.get("state"),e.next=5,Transaction.createFromState(n,Sign.Invite,t);case 5:return i=e.sent,e.next=8,Transaction.signUrl(this.config,i);case 8:o=e.sent,window.location.assign(o.href);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"handleNewTokens",value:function(e,t){if(t&&t.valid){this.memory.setAccessToken(t.accessToken),this.memory.setIdToken(t.idToken);var r=Transaction.getRefreshParameters(t);Storage.createCookie(refreshKey(),r),this.recurringRefreshToken(r);}else this.recurringRefreshToken(e);}},{key:"handleRedirectCallback",value:(i=asyncToGenerator(regenerator.mark((function e(){var t,r,n;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseRedirectParams(),e.next=3,Transaction.get(t.state);case 3:return r=e.sent,e.next=6,Transaction.getTokens(this.config,t.authorization,r);case 6:return n=e.sent,this.handleNewTokens(this.getRefreshStore(),n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"canRefresh",value:function(e){var t=e.access_token_expiration_date,r=e.refresh_leeway,n=e.refresh_retry,i=e.refresh_token,o=new Date(t),a=r||DEFAULT_LEEWAY_IN_SECONDS,s=n||DEFAULT_REFRESH_RETRY;o.setSeconds(o.getSeconds()-a*s);var c=new Date;return console.log(this.currentAccessTokenPresent()),"string"==typeof i&&(!this.currentAccessTokenPresent()||o<c)}},{key:"getRefreshStore",value:function(){return Storage.getCookie(refreshKey())}},{key:"handleRefreshTokens",value:(n=asyncToGenerator(regenerator.mark((function e(){var t,r;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getRefreshStore(),!this.canRefresh(t)){e.next=8;break}return e.next=4,Transaction.getTokensByRefresh(this.config,t.refresh_token);case 4:r=e.sent,this.handleNewTokens(t,r),e.next=9;break;case 8:this.recurringRefreshToken(t);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"recurringRefreshToken",value:function(e){var t,r={refreshTokenParameters:e};"serviceWorker"in navigator&&(null===(t=this.worker)||void 0===t||t.postMessage(r));}},{key:"getUser",value:function(){var e=this.getCurrentIdToken();return void 0===e?e:Jwt.body(e)}},{key:"getClaimsFromAccess",value:function(e){return void 0!==e&&e.length>0?Jwt.body(e):null}},{key:"hasAuthenticationParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:locationSearch();return CODE_PARAMS.test(e)&&STATE_PARAMS.test(e)}},{key:"hasInvitationParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:locationSearch();return STATE_PARAMS.test(e)&&!AUTH_PARAMS.test(e)}},{key:"canHandleAuthentication",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:locationSearch();return !this.currentAccessTokenPresent()&&this.hasAuthenticationParams(e)}},{key:"canHandleInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:locationSearch();return !this.currentAccessTokenPresent()&&this.hasInvitationParams(e)}},{key:"userAccountAccess",value:(r=asyncToGenerator(regenerator.mark((function e(){var t,r,n,i;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getCurrentAccessToken())){e.next=9;break}return (r=new URL(cryptrBaseUrl(this.config))).pathname="/api/v1/client-management/tenants/".concat(this.config.tenant_domain,"/account-access"),n={client_id:this.config.client_id,access_token:t},i={headers:{Authorization:"Bearer ".concat(t)}},e.abrupt("return",axios$1.post(r.toString(),n,i));case 9:return console.log("no accessToken found"),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"logOut",value:(t=asyncToGenerator(regenerator.mark((function e(t){var r,n,i=this,o=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:window.location,(n=this.getCurrentAccessToken())?Request$1.revokeAccessToken(this.config,n).then(function(){var e=asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n.data.revoked_at){e.next=8;break}return e.next=3,Storage.clearCookies(i.config.client_id);case 3:return e.next=5,i.memory.clearTokens();case 5:"function"==typeof t&&null!==t?t():(console.info("Default logOut callback : reload page"),void 0!==r&&r.replace(r.href.split("?")[0])),e.next=9;break;case 8:console.error(n.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(null==i.config.telemetry||i.config.telemetry)&&captureException(e),console.error(e);})):console.log("No accessToken found"),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"decoratedRequest",value:function(e){return Request$1.decoratedRequest(this.getCurrentAccessToken(),e)}}]),e}();

var CryptrSpa={createClient:function(){var r=asyncToGenerator(regenerator.mark((function r(e){return regenerator.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Client(e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),client:Client,events:EventTypes,crypto:Crypto,storage:Storage,transaction:Transaction,version:"0.1.4"};

export default CryptrSpa;
